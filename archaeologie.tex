\documentclass[a4paper]{ltxdoc}
\usepackage{hypdoc}
  \usepackage[no-math]{fontspec}
  \usepackage{polyglossia}
  \setdefaultlanguage{german}
% \usepackage[oldstyle]{libertine}
%\usepackage{roboto}%Schriftart für Sansserif 
\usepackage{coolthms}
\usepackage{csquotes}
\usepackage{enumitem}
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 2pt}
\setenumerate[1]{label=(\alph*),leftmargin=*,nolistsep,parsep=\parskip}
\usepackage{changepage}
\newenvironment{bsp}{\begin{adjustwidth}{1cm}{1cm}}{\end{adjustwidth}}
\hypersetup{colorlinks=true}
\listfiles
\EnableCrossrefs
\CodelineIndex
\RecordChanges
\usepackage{wallpaper}
\CenterWallPaper{0.9}{proofreading} %% for proofreading

% Um Kommentare einzufügen
% \usepackage[disable]{todonotes} % notes not showed
\usepackage[draft]{todonotes}   % notes showed


\begin{document}
%  \DocInput{archaeologie.dtx}

\MakeShortVerb{\"}
 \newenvironment{syntax}{\medskip\hspace*{1em}}{\par\medskip}
 \def\verbatimchar{;}



 \title{\texttt{archaeologie} -- \\\texttt{biblatex} für Archäologen\footnote{Ebenso nützlich und geeignet für (Alt-)Historiker und (Alt-)Philologen.}}
 \author{Lukas C. Bossert\thanks{\url{LukasCB@me.com}} \and Johannes Friedl\thanks{\url{NN}}}
 \date{Version: \today}
 
 
 
 \maketitle
 \begin{abstract}
\noindent Der Stil setzt die Zitations- und Bibliographievorgaben  des Deutschen Archäologischen Instituts (DAI) (Stand 2014) um.
Zudem gibt es auch die Möglichkeit im Autor-Jahr- und Autor-Titel-System zu zitieren und bibliographieren. 
 \end{abstract}

 \tableofcontents

 \section{Verwendung}

 \DescribeMacro{archaeologie}
 "archaeologie" heißt der Stil und muss entsprechend geladen werden.
 \begin{bsp}
 "\usepackage[style=archaeologie,%"\\
 "            "\meta{weitere Optionen}"]{biblatex}"\\
 "\bibliography"\marg{"bib"-Datei}\end{bsp}
 Dabei kann man weitere der \enquote{konventionellen} "biblatex"-Optionen oder der -- weiter unten beschriebenen -- von "archaeologie" zur Verfügung gestellten Optionen laden.

 "archaeologie" lädt standardmäßig den DAI-Stil im Autor-Jahr-System. Um schnell und einfach im DAI-Stil zu zitieren, benötigt es keiner weiteren Einstellungen und Optionen.


An geeigneter Stelle sollte man natürlich noch den "\printbibliography"-Befehl aufrufen, um eine Bibliographie zu erzeugen. Diese kann "biblatex"-typisch formatiert werden, beispielsweise sind die Einträge standardmäßig ab der zweiten Zeile eingerückt und alphabetisch sortiert.  
 Da "archaeologie" unterschiedliche Zitierweisen von Textsorten wie antiker Primärliteratur oder wissenschaftlicher Sekundärliteratur unterstützt, empfiehlt es sich, die Bibliographieaufteilung dementsprechend anzupassen. Verschiedene Möglichkeiten zur Gestaltung der Bibliographie siehe  \cref{quellenverzeichnisse}.


\begin{center}* * *\end{center}
 \DescribeMacro{\cite}
Die einfachste und einzige Weise zum Zitieren wird mit "\cite" bewerkstelligt:\par
 \begin{syntax}"\cite"\oarg{prenote}\oarg{postnote}\marg{Schlüssel}\end{syntax}
 wobei \meta{prenote} eine einleitende Bemerkung (z.B. \enquote{Vgl.}) ist und \meta{postnote} für gewöhnlich die Seitenzahl. Wenn nur ein optionales Argument gegeben wird, so ist das die Seitenzahl:\par
 \begin{syntax}"\cite"\oarg{postnote}\marg{Schlüssel}\end{syntax}
 \meta{Schlüssel} ist dabei in jedem Fall der Schlüssel des Eintrags aus der "bib"-Datei.



%\todo[inline]{Vielleicht können wir hier am Anfang eine Standardpräambel inkl. Bibliographieaufteilung vorschlagen, die dann "biblatex"-Unversierte ohne nachzudenken übernehmen können. 
%Dort muss nur klar gemacht werden, dass die bib-Datei die entsprechenden keywords und options enhalten muss (antik, Quelle etc.)}

 \subsection{Optionen für die Präambel}\label{optionen-preamble}
 In der Präambel kann man, wie folgt, den Stil "archaeologie" über das Paket "biblatex" laden:
 
" \usepackage["\\						
"		" "backend=biber,			% aktiviert biber"\\
"		" "style=archaeologie, 	% lädt den Stil 'archaeologie'"\\
"		" "lexika=true, 				%true =  bspw. LTUR 2 (1994) 123 s. v."\\
"		" "]{biblatex}"
 
In diesem Beispiel wurde der Stil "archaeologie" mit der Option "lexika" geladen ("=true"). 
Die Ausgabe in Fußnote und in Bibliographie wird jedoch maßgeblich durch weitere verschiedene Optionen manipuliert, die entsprechend ebenfalls in der Präambel geladen werden können.


 \begin{center}
* * *
\end{center}
 \DescribeMacro{dai-verweis}
 Diese Option ermöglicht in den Fußnoten die Angabe eines Rückverweis zur Erstnennung des zitierten Bibliographieeintrags.
 "#### Work in Progress ####"
 
 \begin{center}
* * *
\end{center}
\DescribeMacro{uebersetzung}
Wenn diese Option aktiviert wird, erfolgt die Angabe  eines Originaltitels, die Sprache, aus welcher übersetzt wurde und des Übersetzers des Werkes. Diese Option ist standardmäßig auf "=false" gesetzt. 
Ein Beispiel verschafft Klarheit. Folgender Bibliographieeintrag \\
 
"@Book{Lefebvre_2011,"\\
"  Title 			= {The Production of Space},"\\
"  Author		= {Henri Lefebvre},"\\
"  Publisher 	= {Blackwell Publishing Ltd},"\\
"  Year			= {2011},"\\
"  Edition		= {30},"\\
"  Location	= {Maien, MA and Oxford and Victoria},"\\
"  Origdate	= {1991},"\\
"  Origlanguage	= {french},"\\
"  Origtitle	= {La production de l’espace},"\\
"  Translator	= {Donald Nicholson-Smith}"\\
" }"

wird in der Bibliographie zunächst auf diese Weise umgesetzt:
\begin{bsp}
Henri Lefebvre, The Production of Space \textsuperscript{30}(Maien, MA 1991; Nachdr. Maien, MA 2011)
\end{bsp}
 
 mit der aktivierten Option "uebersetzung" wird daraus:
 
 \begin{bsp}Henri Lefebvre, The Production of Space, Originaltitel: La production de l’espace, aus dem Französischen übers. von Donald Nicholson-Smith  \textsuperscript{30}(Maien, MA 1991; Nachdr. Maien, MA 2011)\end{bsp}
 


\begin{center}
* * *
\end{center}
 \DescribeMacro{lexika}
 Lexikoneinträge können in den Fußnoten in verschiedenen Zitationsformen dargestellt werden.
 Voraussetzung ist, dass  beim Bibliographiedatensatz bei "options = {lexikon}" gesetzt wird. Zudem   bietet sich optional an ebenso  "keywords = {lexikon}" zu setzen, um diese Einträge dann in der Bibliographie auszuschließen (über "notkeyword=lexikon", bzw. "keyword=lexikon").
 
 Am folgenden Beispielsdatensatz wird die Option verdeutlicht:\\
 
%  \begin{bsp}
"	@Inreference{Nieddu_1995,"\\
"  Title			= {Dei Consentes},"\\
"  Author		= {Nieddu, Giuseppe},"\\
"  Year			= {1995},"\\
"  Maintitle	= {LTUR},"\\
"  Pages 		= {9--10},"\\
"  Volume		= {2},"\\
"  Bookpagination	= {column},"\\
"  Keywords	= {lexikon},"\\
"  Options 	= {lexikon},"\\
"  }"\\
%  \end{bsp}
  
  Die Ausgabe von "\cite{Nieddu_1995}" ist nun auf zwei Arten möglich:
  
 \begin{enumerate}
 \item standardmäßig wird daraus:  Nieddu 1995
 \item mit der Option "lexika" wird dies zu: LTUR 2 (1995) 9-10 s. v. Dei Consentes (G. Nieddu)
 \end{enumerate}
 
 

\begin{center}
* * *
\end{center}
 \DescribeMacro{jahrreihe}
 Mit der Option "jahrreihe" kann man bewirken, dass die Reihe (Felder "series" und "number") erst \emph{nach} dem Jahr ausgegeben werden, was von der Richtlinie des DAI abweicht. 
 Bei Sammelbänden kann diese Option zum Tragen kommen:
 
" @Incollection{Mundt_2015,"\\
"   Author                   = {Mundt, Felix},"\\
"  Title                    = {Der Mensch, das Licht und die Stadt},"\\
"  Subtitle                 = {Rhetorische Theorie und Praxis antiker und humanistischer Städtebeschreibung},"\\
"  Pages                    = {179--206},"\\
"  Editor                   = {Therese Fuhrer and Felix Mundt and Jan Stenger},"\\
"    Maintitle                = {Cityscaping},"\\
"  Mainsubtitle             = {Constructing and Modelling Images of the City},"\\
"  Publisher                = {de Gruyter},"\\
"  Year                     = {2015},"\\
"  Number                   = {3},"\\
"  Series                   = {Philologus. Supplemente},"\\
"  Location                 = {Berlin and Boston},"\\
"}"\\
 
 Ohne eine Option wird in der Bibliographie daraus:
 \begin{bsp}•\end{bsp}
 
 
 mit der aktivierten Option "jahrreihe" verändert sich die Reihenfolge:
 \begin{bsp}•\end{bsp}
 
 

%% \DescribeMacro{fnverweise}
%% Die Option "fnverweise" fügt an ein Folgezitat den Hinweis \enquote{(Wie Anm. \meta{Nummer der Fußnote des Erstzitats})}. Hier empfiehlt es sich wahrscheinlich entweder ganz auf des Jahr (also "mitjahr=false") oder zumindest auf die Klammern ("jahrkeineklammern") zu verzichten. Wurde der folgende Eintrag zum ersten Mal in Fußnote 3 zitiert, liefert ein erneuter "\cite"-Befehl
%%\begin{bsp}  {\sc Southern}, P.: Domitian 1997 (wie Anm. 3), 2.\end{bsp}




 
 

\begin{center}
* * *
\end{center}
 \DescribeMacro{\citeauthor} 
  \DescribeMacro{\citetitle}
\DescribeMacro{vollername}
\DescribeMacro{nurnachname}

Im Fließtext kann direkt auf Autoren (und bei fehlender Autorenangabe wird der oder die Herausgeber genannt) der Forschungsliteratur verwiesen werden. 
Autoren/Herausgeber werden über "\citeauthor"\marg{Schlüssel} aufgerufen.
Ebenso ist auch das Auslesen der Werktitle über "\citetitle"\marg{Schlüssel} möglich, wobei der Titel in eine "emph{}"-Umgebung gesetzt wird und das Erscheinungsjahr in Klammern dahinter.

Zunächst erfolgt die Ausgabe der Autoren, bzw. Herausgeber mit den Initialen des Vornamens und mit dem Nachnamen. 
Die Darstellung der Namen kann jedoch noch auf zwei andere  Arten geschehen und sind stets mit ihrem Bibliographieeintrag zum Bibliographie-\marg{Schlüssel} via "hyperref" verlinkt. Die zwei Arten sind: mit dem vollen Vor- und Zunamen und nur mit dem Nachnamen. In einer Fußnote jedoch wird stets nur der/die Nachnamen gesetzt.

Ein Beispiel macht dies klarer.
Der Bibliographieeintrag lautet:

"@Article{Boehmer_1985,"\\
"  Title                    = {Astragalspiele in und um Warka},"\\
"  Author                   = {Boehmer, Rainer Michael and Wrede, Nadja},"\\
"  Journal                  = {Baghdader Mitteilungen},"\\
"  Pages                    = {399--404},"\\
"  Volume                   = {16},"\\
"  Year                     = {1985},"\\
"  Shortjournal             = {BaM},"\\
"  }"

Im Fließtext schreibt man:

\begin{bsp} \ldots , dies behaupten ebenso  "\citeauthor{Boehmer_1985}" in ihrem jüngsten Werk "\citetitle{Boehmer_1985}".\end{bsp}

Und nach dem Texen wird dann in der Standardeinstellung (ohne weitere Optionen):
\begin{bsp} \ldots , dies behaupten ebenso R. M. Boehmer  and N. Wrede in ihrem jüngsten Werk \emph{Astragalspiele in und um Warka} (1985).\end{bsp}

Oder mit den Optionen:
\begin{bsp}
 \begin{enumerate}
 \item\label{name:a} \DescribeMacro{vollername} 
 \ldots , dies behaupten ebenso Rainer Michael Boehmer  and Nadja Wrede in ihrem jüngsten Werk \emph{Astragalspiele in und um Warka} (1985).
 
\item\label{name:b}  \DescribeMacro{nurnachname}
\ldots , dies behaupten ebenso  Boehmer und  Wrede in ihrem jüngsten Werk \emph{Astragalspiele in und um Warka} (1985).

 \end{enumerate}
\end{bsp}


Werden allerdings mit "\citeauthor", bzw. "\citetitle"  antike Autoren und ihre Werktitel aufgerufen (dafür muss im Bibliographieeintrag "options=antik" geschrieben werden), dann wird für den Autorenname das Feld "namea" ausgelesen, in dem der deutsche Rufnamen des Autors steht. 
Bei antiken Werktitel wird keine Jahreszahl dazugeschrieben.

Somit wird aus dem Bibliographieeintrag

"@Book{Quint_inst,"\\
"  Title                    = {Ausbildung des Redners},"\\
"  Author                   = {Fabius Quintilianus, Marcus},"\\
"  Editor                   = {Rahn, Helmut},"\\
"  Year                     = {2015},"\\
"  Edition                  = {6},"\\
"  Keywords                 = {Quelle},"\\
"  Location                 = {Darmstadt},"\\
"  Options                  = {antik},"\\
"  Origlanguage             = {latin},"\\
"  Shorthand                = {Quint. inst.},"\\
"  Subtitle                 = {Institutio oratoria},"\\
"  Namea                    = {Quintilian}"\\
"}"

wie folgt ausgelesen:

\begin{bsp}
 \ldots Auch "\citeauthor{Quint_inst}" nennt in "\citetitle{Quint_inst}" die notwendigen physischen Qualitäten eines Redners.\par

\ldots Auch Quintilian nennt in \emph{Ausbildung des Redners} die notwendigen physischen Qualitäten eines Redners. 
\end{bsp}


\begin{center}
* * *
\end{center}
\DescribeMacro{longjournal}
Die DAI-Vorgabe sieht vor, Zeitschriften nur abgekürzt wiederzugeben, dafür wird das Feld "shortjournal" vom Bibliographieeintrag ausgelesen. Gibt es keine Abkürzung, also wurde das Feld "shortjournal" leer gelesen, wird automatisch das Feld "journal" ausgelesen.
Möchte man hingegen den vollen Zeitschriftennamen in der Bibliographie haben, dann muss man die Option "longjournal" aktivieren.

"@Article{Ball_2013,"\\
"  Title                    = {Pompeii Forum Project},"\\
"  Author                   = {Larry F. Ball and John J. Dobbins},"\\
"  Journal                  = {American Journal of Archaeology},"\\
"  Pages                    = {461--492},"\\
"  Volume                   = {117},"\\
"  Year                     = {2013},"\\
"  Number                   = {3},"\\
"  Shortjournal             = {AJA},"\\
"  Subtitle                 = {Current Thinking on the Pompeii Forum}"\\
"  }"\\

Ohne eine Zusätzliche Option wird der Eintrag in der Bibliographie wie folgt umgesetzt:

\begin{bsp}
Larry F. Ball – John J. Dobbins, Pompeii Forum Project. Current Thinking on the Pompeii Forum, AJA 117/3, 2013, 461–492
\end{bsp}

Mit der aktivierten angesprochenen Funktion "longjournal" wird daraus:

\begin{bsp}Larry F. Ball – John J. Dobbins, Pompeii Forum Project. Current Thinking on the Pompeii Forum, American Journal of Archaeology 117/3, 2013, 461–492\end{bsp}

\begin{center}
* * *
\end{center}
\DescribeMacro{verlag}

Angabe aller Erscheinungsorte und Verlagsort. Damit geht auch eine Änderung der Auflagezahl einher, die dann direkt vor das Erscheinungsjahr gesetzt wird.
Erstauflage wird in eckiger Klammer nach dem Erscheinungsjahr gesetzt.

"@Book{Emme_2013,"\\
"  Author                   = {Burkhard Emme},"\\
"  Title                    = {Peristyl und Polis},"\\
"  Subtitle                 = {Entwicklung und Funktionen öffentlicher griechischer Hofanlagen},"\\
"  Number                   = {1},"\\
"  Publisher                = {Walter de Gruyter},"\\
"  Series                   = {Urban Spaces},"\\
"  Year                     = {2013},"\\
"  Location                 = {Berlin},"\\
"}"\\

 Ohne eine Option wird in der Bibliographie daraus:
 \begin{bsp}•\end{bsp}
 
 
 mit der aktivierten Option "verlag" verändert sich die Reihenfolge:
 \begin{bsp}•\end{bsp}
 
 
 
 
\begin{center}
* * *
\end{center}
\DescribeMacro{hrsgv}

Herausgeber werden nicht mehr zu Beginn des Sammelbandes aufgelistet und mit einem "(Hrsg.)" gekennzeichnet, sondern nach dem Titel des Sammelbandes mit dem Zusatz "hrsg. v."



"@Inproceedings{Wulf-Rheidt_2013,"\\
"  Author                   = {Wulf-Rheidt, Ulrike},"\\
"  Title                    = {Der Palast auf dem Palatin -- Zentrum im Zentrum},"\\
"  Subtitle                 = {Geplanter Herrschersitz oder Produkt eines langen Entwicklungsprozesses?},"\\
" Pages                    = {277--289},"\\
"  Editor                   = {Dally, Ortwin and Fless, Friederike and Haensch,"\\
"									Rudolf and Pirson, Felix and Sievers, Susanne},"\\
"  Maintitle                = {Politische Räume in vormodernen Gesellschaften},"\\
"  Mainsubtitle             = {Gestaltung – Wahrnehmung – Funktion},"\\
"  Year                     = {2013},"\\
"  Eventdate                = {2009-11-18/2009-11-22},"\\
"  Eventtitle               = {Internationale Tagung des DAI und des DFG-Exzellenzclusters TOPOI},"\\
" Venue                    = {Berlin},"\\
"  Publisher                = {Verlag Marie Leidorf},"\\
"  Location                 = {Rahden/Westf.},"\\
"  Series                   = {Menschen – Kulturen – Traditionen},"\\
"  Volume                   = {6},"\\
"}"\\


 Ohne eine Option wird in der Bibliographie daraus:
 \begin{bsp}•\end{bsp}
 
 
 mit der aktivierten Option "hrsgv" verändert sich die Reihenfolge:
 \begin{bsp}•\end{bsp}
 
 


\begin{center}
* * *
\end{center}
\DescribeMacro{jahrinklammern}

Setzt die Jahreszahlen in der Fußnote und in der Bibliographie in runde Klammern.





\begin{center}
* * *
\end{center}
\DescribeMacro{kapitaelchen}
Die Option ändert die Formatierung der Zitation, sodass die Namen in Kapitälchen gesetzt werden.

\begin{center}
* * *
\end{center}
\DescribeMacro{miturl}
Angabe von DOI/URL/eprint


 \section{Beschreibung der Eintragtypen}
% %\protect\footnote{Die Beispiele sind teilweise aus der PDF des DAI entnommen \mkbibparens{\url{https://www.dainst.org/documents/10180/70593/01_Schlagwortliste_quer.pdf}\\
% }  und wurden mit weiteren eigenen Literatureinträgen ergänzt.
% }}

 Der "archaeologie"-Zitierstil definiert verschiedene bibliography driver, die es erlauben verschiedene Arten Werke zu zitieren. Diese werden im Folgenden zusammen mit den für sie relevanten Optionen beschrieben.



 \subsection{Typ \texttt{@book}}\label{book}

 \DescribeMacro{@book}
 Fangen wir ganz einfach an: Zu einem einfachen Buch sieht der Eintrag in der "bib"-Datei ungefähr folgendermaßen aus:\\[3pt]
"@book{Beyen_1960,"\\
"	author={Beyen, Hendrik Gerard},"\\
"	title={Die pompejanische Wanddekoration vom zweiten bis zum vierten Stil},"\\
"	volume={2.1 Tafeln},"\\
"	location={Haag},"\\
"	year={1938}"\\
"}"\\[3pt]
 Ein etwas umfangreicheres Beispiel mit Feld "series" ist:\\[3pt]
"@book{Schoerner_1995,"\\
"	author={Schörner, Günther},"\\
"	title={Römische Rankenfriese},"\\
"	subtitle={Untersuchungen zur Baudekoration der späten Republik" \ldots"},"\\
"	series={BeitrESkAr},"\\
"	number={15},"\\
"	location={Mainz},"\\
"	publisher={Philipp von Zabern},"\\
"	year={1995}"\\
"}"\\[3pt]
 Die Zitierreihenfolge\\[3pt]
"	a\footnote{\cite[Vgl.][43]{Beyen_1960}}"\\
"	b\footnote{\cite[2]{Schoerner_1995}}"\\[3pt]
 liefert (in Fußnoten) folgende Einträge:
%% \begin{enumerate}
%% \item\label{book:a} Vgl. {\sc Southern}, P.: Domitian. Tragic Tyrant, London / New York 1997, 43.
%% \item\label{book:b} Ebd., 2. 
%% \end{enumerate}

Um Festschriften/Gedenkschriften/Ausstellungskataloge/Auktionskataloge entsprechend zu zitieren, gehört der Zusatz ins Feld "titleaddon", bzw. wenn es sich um ein "@inbook" oder "@inproceedings" handelt, entsprechend ins Feld "maintitleaddon".



% Der Eintrag in der Bibliographie entspricht dem Erstzitat. Details erfährt man in \cref{driver}.

 \DescribeMacro{@collection}
 Der Typ "@collection" entspricht hier dem Typ "@book".

 \subsection{Typ \texttt{@inbook}}\label{inbook}

 \DescribeMacro{@incollection}
 Kapitel aus Sammelbändern macht man am Besten mit dem Typ "@incollection". Am besten sieht man das wieder an Hand eines Beispiels:\\[3pt]
%%"@inbook{christ,"\\
%%"	author={Karl Christ},"\\
%%"	title={Der hessische Raum in der römischen Kaiserzeit},"\\
%%"	maintitle={Aus Geschichte und ihren Hilfswissenschaften},"\\
%%"	maintitleaddon={Festschrift für Walter Heinemeyer zum 65."\\
%%"Geburtstag},"\\
%%"	editor={Herbert Bannasch and H-P. Lachmann},"\\
%%"	series={Veröffentlichungen der Historischen Komission für"\\
%%"Hessen},"\\
%%"	number={40},"\\
%%"	location={Marburg},"\\
%%"	year={1979},"\\
%%"	pages={528--543}"\\
%%"}"\\[3pt]
%% Beim Erstzitat liefert dann zum Beispiel "\cite[13]{christ}":
%%
%% \begin{bsp}
%% {\sc Christ}, Karl: Der hessische Raum in der römischen Kaiserzeit, in: Aus Geschichte und ihren Hilfswissenschaften. Festschrift für Walter Heinemeyer zum 65. Geburtstag, hrsg. v. Herbert Bannasch und H-P. Lachmann (Veröﬀentlichungen der Historischen Komission für Hessen 40), Marburg 1979, 528--543, hier 13. 
%% \end{bsp}
%%
%% Bemerkenswert ist, dass weil der Eintrag über eigene Seitenzahlen verfügt (das Feld "pages" ist nicht leer) wird ein \enquote{hier} vor der aktuell zitierten Seite ausgegeben.
%%
%% Beim Folgezitat sieht das dann so aus:
%%
%% \begin{bsp}
%% Vgl. {\sc Christ}, K.: Der hessische Raum in der römischen Kaiserzeit (1979), 5.
%% \end{bsp}
%%
%% Natürlich lassen sich hier gleichermaßen alle in \cref{book} beschriebenen Optionen verwenden.
%%
%% \DescribeMacro{hrsg}
%% Wenn beim Herausgeber statt \enquote{\meta{Buchtitel}, hrsg. v.} der Name des Herausgeber gefolgt von \enquote{(Hrsg.): \meta{Buchtitel}} stehen soll, so kann man das durch die Option "hrsg" erreichen. Der obige Eintrag wird dann zu
%%
%% \begin{bsp}
%% {\sc Christ}, Karl: Der hessische Raum in der römischen Kaiserzeit, in: Bannasch, Herbert / Lachmann, H-P. (Hrsg.): Aus Geschichte und ihren Hilfswissenschaften. Festschrift für Walter Heinemeyer zum 65. Geburtstag (Veröﬀentlichungen der Historischen Komission für Hessen 40), Marburg 1979, 528--543, hier 13.
%% \end{bsp}
%%

%% Der Bibliographieeintrag entspricht wieder dem Erstzitat.



 \DescribeMacro{@incollection}
 Der Typ "@inbook" entspricht hier dem Typ "@incollection".

 \subsection{Typ \texttt{@article}}\label{article}
%%
%% \DescribeMacro{@article}
%% Artikel aus Fachzeitschriften können folgendermaßen behandelt werden: Der "bib"-Eintrag\\[3pt]
%%"@article{strobel,"\\
%%"	author={Karl Strobel},"\\
%%"	title={Der Aufstand des L. Antonius Saturninus und der so"\\
%%"genannte zweite Schattenkrieg Domitians},"\\
%%"	shorttitle={L. Antonius Saturninus und der zweite"\\
%%"Schattenkrieg Domitians},"\\
%%"	journal={Tyche},"\\
%%"	number={1},"\\
%%"	year={1986},"\\
%%"	pages={203--220}"\\
%%"}"\\[3pt]
%% wird bei erstmaligem "\cite[7]{strobel}" zu
%%
%% \begin{bsp}
%% {\sc Strobel}, Karl: Der Aufstand des L. Antonius Saturninus und der so genannte zweite Schattenkrieg Domitians, in: Tyche 1 (1986), 203--220, hier 7.
%% \end{bsp}
%%
%% und bei wiederholtem zitieren zu
%%
%% \begin{bsp}
%% {\sc Strobel}, K.: L. Antonius Saturninus und der zweite Schattenkrieg Domitians (1986), 6.
%% \end{bsp}
%%
%% Auch hier lassen sich natürlich die Optionen aus \cref{book} (zum Beispiel zum Anzeigen des Vornamens beim Kurzzitat) verwenden.
%%
%% Der Bibliographieeintrag entspricht wie gewohnt dem Erstzitat.
\subsection{Typ \texttt{@proceedings}}\label{proceedings}

 Für Beiträge innerhalb eines Konferenzbandes müssen die Felder "venue", "eventdate" und "eventtitle" ausgefüllt werden. Ansonsten alle anderen Felder entsprechend wie bei "@book":
 
" @Proceedings{Kurapkat_2014,"\\
"Title                    = {Die Architektur des Weges},"\\
"Editor                   = {Kurapkat, Dietmar and Schneider, Peter I."\\
"									and Wulf-Rheidt, Ulrike},"\\
"Year                     = {2014},"\\
"Eventdate                = {2012-02-08/2012-02-11},"\\
"Eventtitle               = {Kolloquium Architekturreferat des DAI},"\\
"Location                 = {Regensburg},"\\
"Number                   = {11},"\\
"Publisher                = {Schnell + Steiner},"\\
"Series                   = {Diskussionen zur Archäologischen Bauforschung},"\\
"Subtitle                 = {Gestaltete Bewegung im gebauten Raum},"\\
"Venue                    = {Berlin},"\\
" }" 
\\

So wird daraus: 
 
\begin{bsp}D. Kurapkat, P. I. Schneider und U. Wulf-Rheidt (Hrsg.), Die Architektur des Weges. Gestaltete Bewegung im gebauten Raum. Kolloquium Architekturreferat des DAI Berlin 8.–11. Februar 2012, Diskussionen zur Archäologischen Bauforschung 11 (Regensburg 2014)\end{bsp}
 
\subsection{Typ \texttt{@inproceedings}}\label{inproceedings}

Wie bei "@proceedings" so auch hier:


" @Inproceedings{Torelli_1991,"\\
"  Title				= {Il ›diribitorium‹ di Alba Fucens e il ›campus‹ eroico di Herdonia},"\\
"  Author			= {Torelli, Mario},"\\
"  Editor			= {Mertens, Josef},"\\
"  Year				= {1991},"\\
"  Eventdate	= {1990-02-01/1990-02-03},"\\
"  Eventtitle		= {Actes du Colloque International Organisé"\\
"							à l'Occasion du 50. Anniversaire de l'Academia Belgica et"\\
"							du 40. Anniversaire des Fouilles Belges en Italie},"\\
"  Location		= {Bruxelles},"\\
"  Maintitle		= {Comunitá indigene e problemi della romanizzazione"\\
"							 nell’Italia centro-meridionale (IV--III sec. a.C.)},"\\
"  Number		= {29},"\\
"  Pages			= {39--63},"\\
"  Publisher		= {Institut Historique Belge de Rome},"\\
"  Series			= {Études de philologie, d'archéologie et d'histoire anciennes},"\\
"  Venue			= {Roma},"\\
"  Hyphenate 	= {italian},"\\
"  Shorttitle		= {Il ›diribitorium‹}"\\
"}"
\\

Und daraus wird:
\begin{bsp}
M. Torelli, Il ‚diribitorium‘ di Alba Fucens e il ‚campus‘ eroico di Her- donia, in: J. Mertens (Hrsg.), Comunitá indigene e problemi della ro- manizzazione nell’Italia centro–meridionale (IV–III sec. a.C.) Actes du Colloque International Organisé à l’Occasion du 50. Anniversaire de l’Academia Belgica et du 40. Anniversaire des Fouilles Belges en Italie Roma, Academia Belgica 1.–3. Februar 1990, Études de philologie, d’archéologie et d’histoire anciennes 29 (Bruxelles 1991) 39–63

\end{bsp}


 \subsection{Typ \texttt{@inreference}}\label{inreference}

 \DescribeMacro{@inreference}
 Mit dem Typ "@inreference" können beispielsweise Lexikonartikel zitiert werden.
 
 
 Wichtig ist, dass darauf geachtet wird, dass bei gewählter Option  "lexika=true" (in der Präambel) und bei der Zitation in Klammern (), der Befehl "\cite"\marg{Schlüssel} in die Umgebung "\mkbibparens{}" gesetzt wird, damit die Klammerregelung automatisch angewendet wird.

 %% Wenn wir neben \cite in der cbx noch \parencite definieren würden, 
 %% bräuchte man diese Besonderheit mit \mkbibparens nicht. 
 %% \parencite ist ja standardmäßig in biblatex definiert, 
 %% d.h. jeder Benutzer würde den automatisch benutzen, 
 %% wenn er in Klammern im Fließtext zitieren würde.
 
 "@Inreference{Neils_1994,"\\
 "  Title                    = {Theseus},"\\
 "  Author                   = {Neils, Jenifer},"\\
 "  Year                     = {1994},"\\
 "  Maintitle                = {LIMC},"\\
 "	Options	               = {lexikon},"\\
 "  Pages                    = {922--951},"\\
 "  Volume                   = {7.1},"\\
 "} "

 \begin{bsp}
	\ldots "\mkbibparens{\cite[vgl.][930 Nr. 283]{Neils_1994}}."
 
  \ldots (vgl. LIMC 7.1 [1994] 922--951 s.\,v. Theseus [J. Neils], 930 Nr. 283).
 \end{bsp}
 
 Verwendet man kein "\mkbibparens{}", dann wird die Ausgabe ohne Klammerregelung angewendet, was nicht gewünscht ist:
 
 \begin{bsp}
	\ldots ("\cite[vgl.][930 Nr. 283]{Neils_1994}").
 
  \ldots (vgl. LIMC 7.1 (1994) 922--951 s.\,v. Theseus (J. Neils), 930 Nr. 283).
 \end{bsp}

Da im Bibliographieeintrag "options={lexikon}" geschrieben wurde, kann man nun bei gewählter Option "lexika=true" alle Lexikoneinträge von der Bibliographie ausschließen (da sie ja in der Fußnote vollzitiert werden).
Dies funktioniert indem man "notkeyword=lexikon" ergänzt bei:

"\printbibliography[%"\\
"            ""notkeyword=lexikon,%"\\
"            ""notkeyword=Quelle,%"\\
"            ""heading=subbibnumbered,%"\\
"            ""title={Forschungsliteratur}]" 

 
%%"@inreference{kinzel,"\\
%%"	author={Kinzel, K.},"\\
%%"	title={Peisistratos},"\\
%%"	maintitle={DNP},"\\
%%"	number={4},"\\
%%"	volume={9},"\\
%%"	year={2000},"\\
%%"	pages={483f.}"\\
%%"}"\\[3pt]
%% liefert im Erstzitat
%%
%% \begin{bsp}
%%  {\sc Kinzel}, K.: Art. \enquote{Peisistratos [4]}, in: DNP 9 (2000), 483f. hier 488. 
%% \end{bsp}
%%
%% und im Folgezitat:
%%
%% \begin{bsp}
%% {\sc Kinzel}, K.: Peisistratos (2000), 490.
%% \end{bsp}
%%
%% Der Eintrag im Literaturverzeichnis entspricht wieder dem Erstzitat.

 \subsection{Typ \texttt{@review}}\label{review}

%% \DescribeMacro{@review}
%% Rezensionen kann man mit dem Typ "@review" zitieren. In der Praxis sieht das so aus:\\[3pt]
%%"@review{schmitz,"\\
%%"	author={Schmitz, W.},"\\
%%"	title={{\sc Patterson}, C.B.: The Family in Greek History,"\\
%%"Cambridge/Massachu\-setts / London 1998},"\\
%%"	journal={Gnomon},"\\
%%"	number={74},"\\
%%"	year={2002},"\\
%%"	pages={182f.}"\\
%%"}"\\[3pt]
%% Das Erstzitat
%%
%% \begin{bsp}
%% {\sc Schmitz}, W. (Rez.): \enquote{{\sc Patterson}, C.B.: The Family in Greek History, Cambridge/Massachusetts~/ London 1998}, in: Gnomon 74 (2002), 182f. hier 185. 
%% \end{bsp}
%%
%% und -- wie immer -- das Kurzzitat:
%%
%% \begin{bsp}
%%  {\sc Schmitz}, W.: {\sc Patterson}, C.B.: The Family in Greek History, Cambridge/ Massachusetts~/ London 1998 (2002), 186.
%% \end{bsp}
%%
%% Wie gewohnt entspricht der Eintrag im Literaturverzeichnis dem Erstzitat.

 \subsection{Typ \texttt{@thesis}}\label{thesis}
Master- und (unpublizierte) Doktorarbeiten sind als "@thesis" aufzunehmen.
Wichtige Felder sind "type="\marg{"phdthesis"} bzw. \marg{"mathesis"}  und "institution="\marg{Universität}.

Beispiel:

" 	@Thesis{Arnolds_2005,"\\
"   Title      	= {Funktionen republikanischer und frühkaiserzeitlicher"\\ 
"					Forumsbasiliken in Italien},"\\
"  	Author	= {Markus Arnolds},"\\
"  	Date			= {2005-05-31},"\\
"  	Institution	= {Ruprecht-Karls-Universität zu Heidelberg},"\\
"  	Type		= {phdthesis},"\\
"  	Year			= {2005},"\\
"  	Url			= {http://nbn-resolving.de/urn:nbn:de:bsz:16-heidok-74406},"\\
"  	Urldate	= {2015-04-17}"\\
"	}"\

In der Bibiographie wird das zu:

\begin{bsp}
M. Arnolds, Funktionen republikanischer und frühkaiserzeitlicher Forumsbasiliken in Italien (Diss. Ruprecht-Karls-Universität zu Heidelberg 2005).\\
url: http://nbn-resolving.de/urn:nbn:de:bsz:16-heidok-74406 (besucht am 17. 04. 2015)

\end{bsp}

 \changes{v1.1}{2015/06/04}{Umsetzung von "@thesis" im Stil.}



%%
%%
 \subsection{Optionen der Literatureinträge}\label{optionen-literatur}

 \DescribeMacro{antik}
Bei dem Zitieren antiker Autoren empfiehlt es sich diese Werke mit der Option "antik" zu versehen. Wir betrachten wieder ein Beispiel:\\[3pt]
"@Book{Cic_Att,"\\
"  Title = {Atticus-Briefe},"\\
"  Author = {Tullius Cicero, Marcus},"\\
"  Editor  = {Kasten, Helmut},   % wird bei @book nicht ausgelesen"\\
"  Publisher = {Artemis {\&} Winkler},"\\
"  Series  = {Tusculum Bücherei},"\\
"  Year = {1980},"\\
"  Edition = {3},"\\
"  Keywords = {Quelle},"\\
"  Location = {Düsseldorf and Zürich},"\\
"  Options = {antik},"\\
"  Origlanguage = {latin},"\\
"  Origyear = {1959},"\\
"  Shorthand  = {Cic. Att.},"\\
"  Translator = {Kasten, Helmut},"\\
"  Usera = {Cicero}     % relevant für \citeauthor"\\
"	}"\\[3pt]
 erscheint im Literaturverzeichnis als:
\begin{bsp}
Cic. Att. \hspace{3em}M. Tullius Cicero, Atticus-Briefe aus dem Lateinischen übers. von Helmut Kasten, Tusculum Bücherei \textsuperscript{3}(Düsseldorf 1959; Nachdr. Düsseldorf 1980)
\end{bsp}
 Beim Zitieren wird allerdings nur das Feld "shorthand" berücksichtigt, das auch so im Literaturverzeichnis als ›Schlüssel‹ auftacht.: 
 "\cite[1, 3,3]{Cic_Att}" liefert
\begin{bsp}Cic. Att. 1, 3,3\end{bsp}

Es gibt auch antike Texte, die in einem Sammelband ("@incollection") herausgegeben sind. 
Dieser Fall stellt jedoch kein Problem dar und wird analog zu "@book" geplottet.
Ein Beispiel verschafft Klarheit. Aus:

"@Incollection{Cic_Sest,"\\
"  Title = {Rede für P.\ Sestius},"\\
"  Author = {Tullius Cicero, Marcus},"\\
"  Editor  = {Fuhrmann, Manfred},"\\
"  Pages = {110--185},"\\
"  Publisher = {Artemis \& Winkler},"\\
"  Year = {1993},"\\
"  Series = {Sammlung Tusculum},"\\
"  Volume = {2},"\\
"  Keywords = {Quelle},"\\
"  Location = {München},"\\
"  Maintitle= {Die politischen Reden},"\\
"  Options = {antik},"\\
"  Origlanguage = {latin},"\\
"  Origtitle = {pro P.\ Sestio},"\\
"  Shorthand = {Cic. Sest.},"\\
"  Translator = {Fuhrmann, Manfred},"\\
"  Usera = {Cicero}"\\
"}"\\

wird:
\begin{bsp}
Cic. Sest. \hspace{3em}M. Tullius Cicero, Rede für P. Sestius, Originaltitel: pro P. Sestio, aus dem Lateinischen übers. von Manfred Fuhrmann, in: M. Fuhrmann (Hrsg.), Die politischen Reden, Bd. 2 Sammlung Tusculum (München 1993) 110--185
\end{bsp}



%% \DescribeMacro{frg}
%% Wenn man Fragmente zitiert kann man dazu die Option "frg" bzw. "frgantik" wählen. Das wirkt sich dann leicht unterschiedlich auf die Zitatsform aus. Wir betrachten das am besten wieder an Beispielen: Der "bib"-Eintrag\\[3pt]
%%"@book{alkaios,"\\
%%"	author={{Alkaios}},"\\
%%"	shorthand={Alk.},"\\
%%"	sortname={Edgar Lobel and Denys Page},"\\
%%"	maintitle={Poetarum Lesbiorum Fragmenta},"\\
%%"	editor={Edgar Lobel and Denys Page},"\\
%%"	shorteditor={LP},"\\
%%"	address={Oxford},"\\
%%"	year={1955},"\\
%%"	keywords={quelle},"\\
%%"	options={frg}"\\
%%"}"\\[3pt]
%% Das "sorttitle"-Feld sorgt hier dafür, dass der Eintrag nicht unter \enquote{Alkaios} sondern den Namen der Herausgeber sortiert wird. Im Literaturverzeichnis sieht das dann folgendermaßen aus:
%%\begin{bsp} {\sc Lobel}, Edgar / {\sc Page}, Denys (Hrsg.): Poetarum Lesbiorum Fragmenta, Oxford 1955.\end{bsp}
%% Wenn man ihn zitiert, erscheint bei "\cite[2]{alkaios}"
%% \begin{bsp} Alk. frg. 2 LP.\end{bsp}
%% Bemerkenswert ist insbesondere die Verwendung des "shorteditor"-Feldes. Ansonsten wird nur der Nachname des Herausgebers angegeben. Details findet man in \cref{driver}.
%%
 \begin{center}* * *\end{center}
 \DescribeMacro{frgantik}
 Bei der Option "frgantik" unterscheidet sich vor allem die Zitierweise: Der Eintrag\\[3pt]
"@Book{Fest,"\\
"  Title = {De verborum significatu quae supersunt cum Pauli epitome},"\\
"  Author = {Pompeius Festus, {Sex}tus},"\\
"  Editor = {Lindsay, Wallace Martin},"\\
"  Publisher = {Teubner},"\\
"  Series = {Bibliotheca scriptorum et Graecorum et Romanorum Teubneriana},"\\
"  Year = {1965},"\\
"  Keywords = {Quelle},"\\
"  Location = {Leipzig},"\\
"  Options = {frgantik},"\\
"  Origyear = {1913},"\\
"  Shorthand = {Fest.},"\\
"  Usera = {Festus}"\\
"}"\\[3pt]
 unterscheidet sich geringfügig durch seinen Eintrag im Literaturverzeichnis:
\begin{bsp}
Fest.\hspace{3em}
W. M. Lindsay (Hrsg.), De verborum significatu quae supersunt cum Pauli epitome, Bibliotheca scriptorum et Graecorum et Romanorum Teubneriana (Leipzig 1913; Nachdr. Leipzig 1965)
\end{bsp}
 Zitiert man ihn aber durch "\cite[3]{Fest}", so entfällt hier das \enquote{frg.}:
 \begin{bsp} Fest. 3 Lindsay. \end{bsp}
 
 \begin{center}* * *\end{center}
 \DescribeMacro{unbekannt}
 Für manche Artikel oder Bücher lässt sich kein Autor oder Herausgeber ermitteln. 
 Diese Werke werden dann als anonym gekennzeichnet und nicht nach dem (anonymen) Autor/Herausgeber zitiert, sondern nach einer gewählten "shorthand". 
 Dafür muss  "options={unbekannt}" stehen. 
 
" @Article{Cosa_1949,"\\
"  Title                    = {Cosa},"\\
"  Author                   = unbekannt,"\\
"  Journal                  = {The Classical Journal},"\\
"  Pages                    = {141--149},"\\
"  Volume                   = {45},"\\
"  Year                     = {1949},"\\
"  Number                   = {1},"\\
"  Keywords                 = {unbekannt},"\\
"  Options                  = {unbekannt},"\\
"  Shorthand                = {Cosa},"\\
"  Subtitle                 = {Republican Colony in Etruria},"\\
"}"\\
 
 Die "shorthand" wurde in diesem Fall analog zum Titel gewählt (Cosa).
 Zitiert man dieses Werk in einer Fußnote, dann wird:

 \begin{bsp}  "\cite[vgl.][145--146]{Cosa_1949}" \end{bsp}
 zu
 
 \begin{bsp} vgl.  [Cosa 1949], 145--146\end{bsp}
 
 Dieser Bibliographieeintrag zeigt zudem eine weitere (allgemeine) Besonderheit auf.
 Im Feld "Author=unbekannt" wurden absichtlich um "unbekannt" keine spitze Klammern "{}" gesetzt.
 Dies hat den Vorteil, dass man mittels "@string" allen "unbekannt" (ohne "{}") einen zentral definierten Wert zuweisen kann.
Der "@string" wird in der "bib"-Datei am Anfang geladen, also vor alle anderen Bibliographieeinträge geschrieben.

Beispielsweise: "@String { unbekannt = {{[}keine~Angabe{]}} }",  sorgt dafür dass der Eintrag "unbekannt" beim Setzen mit dem Wert "[keine Angabe]" versehen wird.
Man kann solche "@String" bei allen Feldern anwenden, bei denen man Schreibfehler vermeiden möchte. 
Ein anderes Beispiel zeigt dies.

"Publisher=CUP" wird dann mittels "@String { CUP = {Cambridge University Press} }" zu 
\begin{bsp}Cambridge University Press\end{bsp}

Das heißt, man kann bei allen Einträgen, die  "Publisher={Cambridge University Press}" haben, den Eintrag auf "Publisher=CUP" verkürzen, um sich dadurch Schreibarbeit aber auch Fehlerquellen zu ersparen.

Es können beliebig viele "@String"s in der Bibliographie stehen.


 \begin{center}* * *\end{center}
\DescribeMacro{nurshorthand}
Für bestimmte Corpora (Inschriften, Münzen, etc.) wird für gewöhnlich mit einer gängigen Abkürzung zitiert.
Diese Abkürzung des Corpus wird im Bibliographieeintrag unter "shorthand" eingetragen.
Nun kann man sehr einfach das gewünschte Corpus in der Fußnote zitieren, mit  "prenote" und "postnote"-Feldern. Bei anderen Autoren-Einträge, die mittels "shorthand" zitiert werden, wird ein Komma zwischen Nachname und "postnote" gesetzt. Dank "options=nurshorthand" fällt dieses Komma weg.

Das Beispiel zeigt die Option für die lateinischen Inschriften:

"@Book{CIL,"\\
" Title                    = {Corpus Inscriptionum Latinarum},"\\
"  Address                  = {Berlin},"\\
"  Year                     = {1863--},"\\
"  Keywords                 = {Sigel},"\\
"  Options                  = {nurshorthand},"\\
"  Shorthand                = {CIL},"\\
"}"\\

Zitiert wird, wie gewöhnlich, mit "\cite[06, 01234]{CIL}". Daraus wird:
\begin{bsp}
CIL 06, 01234
\end{bsp}
Aufgrund der Setzung von "keywords=Sigel" können diese Art von Corpora in einer separaten Bibliographie aufgeführt werden. Siehe dazu \cref{quellenverzeichnisse}

\changes{v1.1}{2015/06/15}{Modifikation der Option "nurshorthand".}


 \subsection{Bibliographie}\label{quellenverzeichnisse}

 \DescribeMacro{\printbibliography}
 Zwar ist es keine spezielle Eigenschaft dieser "biblatex"-Formate aber vielleicht in diesem Zusammenhang doch sinnvoll zu erwähnen, wie man mit "biblatex" seperate Quellen- und Literaturverzeichnisse ausgeben lassen kann. Zunächst sollten alle Quellen in der "bib"-Datei mit dem Feld
 \begin{bsp}"keyword={Quelle},"\end{bsp}
 versehen werden. 

Es bietet sich  an, mit (nummerierten) Unterbibliographien zu arbeiten, die über die Option  "heading=bibnumbered", bzw. "heading=subbibnumbered" geladen werden.

"\printbibheading[heading=bibnumbered,%"\\
"            ""title={Bibliographie}] %" \emph{Überschrift für Bibliographieumgebung}\\
"\printbibliography[keyword=Quelle,%"\\
"            ""heading=subbibnumbered,%"\\
"            ""title={Antike Quellen}]"\\
"\printbibliography[notkeyword=Quelle,%"\\
"            ""heading=subbibnumbered,%"\\
"            ""title={Forschungsliteratur}]" 

Damit wird zuerst die Quellen und danach das \enquote{gewöhnliche} Literaturverzeichnis getrennt voneinander ausgegeben. 
Es können mehrere Bibliographien über "\printbibliography" erstellt werden, die jeweils unterschiedliche Einträge haben können.
Beispielsweise kann man eine Unterbibliographie haben, in der nur die Sigeln (Lexika, Handbücher, Inschriftencorpora, etc) aufgeführt werden. Dafür wird das Feld "keyword" auf den Inhalt "Sigel" ausgelesen:

"\printbibliography[keyword=Sigel,%"\\
"            ""heading=subbibnumbered,%"\\
"            ""title={Abkürzungen}]"\\



 \section{Zusammenfassung}

 Im Folgenden sind noch einmal kurz die möglichen Optionen, mit denen der Stil "archaeologie" aufgerufen werden kann, aufgeführt. Dazu kann man -- quasi auf eigene Gefahr -- noch die konventionellen "biblatex"-Optionen (insbesondere zur Formatierung der Abstände etc. des Literaturverzeichnisses) verwenden. Näheres zu diesen findet man in der Dokumentation von "biblatex".

 \subsection{Paketoptionen}

%% Folgende Optionen können dem Paket "biblatex" beim Laden mit auf den Weg gegeben werden oder auch danach mit "\ExecuteBibliographyOptions" nachgereicht werden. Eventuell lohnt es sich auch einen Blick auf die Beispiele in \cref{beispiele} zu werfen.

 \begin{description}

 \item[fnverweise] \todo{funktioniert noch nicht} Bei Folgezitaten wird auf die Fußnotenzahl des Erstzitats verwiesen. Siehe \cref{book}.
 \item[hrsgv] Bei Sammelbänden steht anstatt \enquote{Hrsg.} nun \enquote{hrsg. v.}. Siehe \cref{inbook}.
 \item[jahrreihe] Die Reihe wird erst nach der Jahreszahl ausgegeben. Siehe \cref{book}.
 \item[jahrinklammern] Die Jahreszahl wird in Klammern gesetzt. Siehe \cref{book}.

 
\item[uebersetzung]
\item[longjournal]
\item[verlag] Angabe aller Verlagsorte und Verlag selbst. Ändert die Formatierung der Edition und Erstausgabe.

\item[lexika] 
\item[nurnachname]
\item[vollername]
\item[kapitaelchen] Die Namen in den Fußnoten werden in Kapitälchen gesetzt.
\item[miturl] Ausgabe von DOI/eprint/URL wenn gewünscht
 \end{description}

 \subsection{Eintragsoptionen}
 
 Zusätzlich kann ein einzelner Eintrag durch folgende Werte in seinem "options"-Feld manipuliert werden. Siehe dazu auch \cref{optionen} und \cref{beispiele}. 

 \begin{description}
 \item[antik] Zeichnet den Eintrag als antike Quelle aus.
 \item[frg] Zeichnet den Eintrag als Fragment aus.
 \item[frgantik] Zeichnet den Eintrag als antikes Fragment aus.
 \item[nurshorthand] Nur das "shorthand"-Feld wird beim Folgezitat ausgegeben. Wichtig für beispielsweise Inschriften- oder Münzcorpora (CIL, AE, RIC, etc.)
 \item[lexikon] Zeichnet den Eintrag als ein zitierfähiges Lexikon aus, das über den abgekürzten Haupttitel zitiert wird (RE, DNP, LTUR, LIMC, etc.)
 \item[unbekannt] Zeichnet den Eintrag als anonymes Werk aus, sodass nach dem Feld "shorthand" zitiert wird.
 \end{description}

 \changes{v1.1}{2015/06/04}{Neue Optionen in Zusammenfassung ergänzt.}

 \section{Formatierung}

%% \DescribeMacro{\autorenschriftart}
%% \DescribeMacro{\citeautorenschriftart}
%% Standardmäßig werden die Autorennachnamen in Kapitälchen gesetzt. Das kann mit dem Befehl "\autorenschriftart" (in Zitaten "\citeautorenschriftart") geändert oder unterdrückt werden. Beispielsweise kann man durch
%% \begin{bsp}"\renewcommand*{\autorenschriftart}{\bf}"\end{bsp}
%% fettgedruckte Nachnamen erzwingen.
%%
%% \DescribeMacro{\autorentrennzeichen}
%% \DescribeMacro{\citeautorentrennzeichen}
%% Sind zu einem Werk mehrere Autoren angegeben, so werden diese standardmäßig durch einen Schrägstrich voneinander getrennt. Wenn man das nicht mag, kann man "\autorentrennzeichen" (für Zitate: "\citeautorentrennzeichen") umdefinieren. 
%%
%%Beispielsweise erzeugt
%% \begin{bsp}"\renewcommand*{\autorentrennzeichen}{\addcomma}"\end{bsp}
%% eine Trennung der Namen durch Kommata. Man sollte dabei darauf achtgeben die im "biblatex"-Paket beschriebenen Makros für Trennzeichen zu verwenden!
%%
%% \DescribeMacro{\orttrennzeichen}
%% Mehrere Orte werden auch standardmäßig durch Schrägstriche getrennt. Das wird -- genau wie "\autorentrennzeichen" -- durch "\orttrennzeichen" festgelegt.
%%
%%

 \section{Beispiele}\label{beispiele}
%%
%% Hier noch ein paar weitere Beispiele, die weiter oben keinen Platz fanden aber vielleicht trotzdem ganz informativ sind. Auch diese sind wieder aus dem Zitierratgeber der Alten Geschichte entnommen. Hier verwenden wir beispielhaft die Option "hrsg" -- natürlich sind alle beschriebenen Optionen entsprechend anwendbar.
%%
%% Beginnen wir mit einem mehrbändigen Werk: Die Einträge aus der "bib"-Datei\\[3pt]
%%"@book{js1,"\\
%%"	author={F. Jacques and Jörg Scheid},"\\
%%"	gender={pm},"\\
%%"	maintitle={Rom und das Reich in der Hohen Kaiserzeit},"\\
%%"	mainsubtitle={44 v. Chr.--260 n. Chr.},"\\
%%"	title={Die Struktur des Reiches},"\\
%%"	volume={1},"\\
%%"	location={Stuttgart and Leipzig},"\\
%%"	year={1998--2000}"\\
%%"}"\par
%%"@book{js2,"\\
%%"	author={F. Jacques and Jörg Scheid},"\\
%%"	gender={pm},"\\
%%"	maintitle={Rom und das Reich in der Hohen Kaiserzeit},"\\
%%"	mainsubtitle={44 v. Chr.--260 n. Chr.},"\\
%%"	volumes={2},"\\
%%"	location={{Stuttgart} and {Leipzig}},"\\
%%"	year={1998--2000}"\\
%%"}"\\[3pt]
%% sehen in der Bibliographie folgendermaßen aus:
%%
%% \begin{bsp}
%%{\sc Jacques}, F. / {\sc Scheid}, Jörg: Rom und das Reich in der Hohen Kaiserzeit. 44 v. Chr.--260 n. Chr., 2 Bde., Stuttgart~/ Leipzig 1998--2000.
%% \end{bsp}\begin{bsp}
%% Dies.: Rom und das Reich in der Hohen Kaiserzeit. 44 v. Chr.--260 n. Chr., Bd. 1: Die Struktur des Reiches, Stuttgart~/ Leipzig 1998--2000. 
%% \end{bsp}
%% An dem Beispiel kann man auch gut den Einfluss des "gender"-Felds ("pm"=plural masculin) auf das \enquote{ders.}-Feld sehen.
%%
%% Der Sammelband\\[3pt]
%%"@collection{schneider,"\\
%%"	editor={Schneider, Helge},"\\
%%"	title={Zur Sozial- und Wirtschaftsgeschichte der römischen"\\
%%"Kaiserzeit},"\\
%%"	location={Darmstadt},"\\
%%"	edition={3},"\\
%%"	year={1981}"\\
%%"}"\\[3pt]
%% erscheint im Literaturverzeichnis mit hochgestellter "edition":
%%
%% \begin{bsp} {\sc Schneider}, Helge (Hrsg.): Zur Sozial- und Wirtschaftsgeschichte der römischen Kaiserzeit, Darmstadt $^{3}$1981. \end{bsp}
%%
%% Angeblich soll man das nicht machen, aber wenn man lieber das Feld "edition" durch so etwas wie
%% \begin{bsp}"edition={3. und noch viel coolere Auflage},"\end{bsp}
%% ersetzt, so erscheint das in der Bibliographie auch \enquote{richtig} als
%% \begin{bsp} {\sc Schneider}, Helge (Hrsg.): Zur Sozial- und Wirtschaftsgeschichte der römischen Kaiserzeit, Darmstadt, 3. und noch viel coolere Auﬂage, 1981.\end{bsp}
%%
%% Die Festschrift\\[3pt]
%%"@book{bl,"\\
%%"	editor={Herbert Bannasch and H-P. Lachmann},"\\
%%"	title={Aus Geschichte und ihren Hilfswissenschaften},"\\
%%"	titleaddon={Festschrift für Walter Heinemeyer zum"\\
%%"65. Geburtstag},"\\
%%"	series={Veröffentlichungen der Historischen Komission"\\
%%"für Hessen},"\\
%%"	number={40},"\\
%%"	location={Marburg},"\\
%%"	year={1979}"\\
%%"}"\\[3pt]
%% kann man so zitieren:
%%
%% \begin{bsp} {\sc Bannasch}, Herbert / {\sc Lachmann}, H-P. (Hrsg.): Aus Geschichte und ihren Hilfswissenschaften. Festschrift für Walter Heinemeyer zum 65. Geburtstag (Veröﬀentlichungen der Historischen Komission für Hessen 40), Marburg 1979.\end{bsp}
%%
%% Für Informationen zum Nachdruck eignet sich das Feld "addendum":\\[3pt]
%%"@book{lauffer,"\\
%%"	author={S. Lauffer},"\\
%%"	title={Kurze Geschichte der antiken Welt},"\\
%%"	location={München},"\\
%%"	year={1971},"\\
%%"	addendum={München 1981}"\\
%%"}"\\[3pt]
%% Im Literaturverzeichnis wird die Information durch ein \enquote{ND} ergänzt:
%%
%% \begin{bsp} {\sc Lauffer}, S.: Kurze Geschichte der antiken Welt, München 1971 (ND München 1981).\end{bsp}
%%
%% Nun möchten wir ein Protokoll der Badischen Ständeversammlung von 1831 zitieren. Das hat als solches keinen Autor, soll also unter dem Titel aufgeführt werden, aber nach der Jahreszahl sortiert werden (nicht nach der Sitzungszahl). Dazu verwenden wir das Feld "sorttitle". Mit "keywords={quelle}" können wir -- wie in \cref{quellenverzeichnisse} -- den Eintrag in einem seperaten Quellenverzeichnis führen und beim Kurzzitat wollen wir eben nicht den Herausgeber mit aufführen, sondern nur den Kurztitel erscheinen lassen. Dazu verwenden wir das Feld "shorthand" und die Option "nurshorthand":\\[3pt]
%%"@inbook{318,"\\
%%"	author = {},"\\
%%"	pages = {1--125},"\\
%%"	title = {32. Sitzung vom 3. Juni 1831},"\\
%%"	location = {Kalrsruhe},"\\
%%"	editor = {der Ständeversammlung des Großherzogthums Baden},"\\
%%"	volume={8},"\\
%%"	maintitle = {Verhandlungen der 2. Kammer der"\\
%%"Ständeversammlung des Großherzogthums Baden},"\\
%%"	year = {1831},"\\
%%"	sorttitle={1831},"\\
%%"	keywords={quelle},"\\
%%"	options={nurshorthand},"\\
%%"	shorthand={32. Sitzung vom 3. Juni 1831},"\\
%%"	hyphenation={german}"\\
%%"}"\\[3pt]
%% Beim Erstzitat liefert dann beispielsweise "\cite[Vgl. z.B.][38]{318}.":
%% \begin{bsp}Vgl. z.B.: 32. Sitzung vom 3. Juni 1831, in: Verhandlungen der 2. Kammer der Ständeversammlung des Großherzogthums Baden, Bd. 8, hrsg. v. der Ständeversammlung des Großherzogthums Baden, Karlsruhe 1831, 1--125, hier 38.\end{bsp}
%% Bemerkenswert ist auch die Ausgabe des Feldes "volume" nach dem "maintitle". Ein direkt darauf folgendes Zitat des selben Werkes liefert nur ein \enquote{ebd.} und ein späteres Zitat liefert als Kurzzitat dann:
%%\begin{bsp}Vgl. 32. Sitzung vom 3. Juni 1831, 66.\end{bsp}
%% \changes{v1.1}{2012/03/31}{Beispiel zur Option "nurshorthand".}
%%
%% Und zum Abschluss zitieren wir noch einen weiteren Lexikoneintrag:\\[3pt]
%%"@inreference{wiegels,"\\
%%"	author={Wiegels, R.},"\\
%%"	title={Limes},"\\
%%"	subtitle={III Germanien},"\\
%%"	maintitle={DNP},"\\
%%"	volume={7},"\\
%%"	year={1999},"\\
%%"	pages={200--203}"\\
%%"}"\\[3pt]
%% Dieser hat im Literaturverzeichnis die Form
%%
%% \begin{bsp} {\sc Wiegels}, R.: Art. „Limes. III Germanien“, in: DNP~7 (1999), 200--203.\end{bsp}

 \section{Installation}
%%
%% Die "cbx"- und "bbx"-Dateien müssen irgendwo platziert werden, wo sie von \LaTeX gefunden werden können, es empfiehlt sich sie im lokalen \TeX-Verzeichnisbaum unterzulegen, der Ordnung halber vielleicht noch in geeigneten Unterordnern. Unter OS X wären das zum Beispiel
%%
%% \begin{bsp}
%% "~/Library/texmf/tex/latex/biblatex/bbx"
%% \end{bsp}
%%
%% bzw. "cbx" für die "cbx"-Datei. Für Erstellung der Dateien aus dieser ("dtx"-)Datei empfiehlt sich zum Beispiel folgende "ins"-Datei:
%% \begin{bsp}
%%"\input docstrip.tex"\\
%%"\askforoverwritefalse"\\
%%"\BaseDirectory{../../tex/latex}"\\
%%"\DeclareDir{bbxdir}{biblatex/bbx}"\\
%%"\DeclareDir{cbxdir}{biblatex/cbx}"\\
%%"\usedir{bbxdir}"\\
%%"\generate{\file{geschichtsfrkl.bbx}"\\
%%"               {\from{geschichtsfrkl.dtx}{bbx}}}"\\
%%"\usedir{cbxdir}"\\
%%"\generate{\file{geschichtsfrkl.cbx}"\\
%%"               {\from{geschichtsfrkl.dtx}{cbx}}}"\\
%%"\end"
%%\end{bsp}
%% Dabei müssen natürlich die Werte von "\BaseDirectory" und "\DeclareDir" entsprechend angepasst werden.
%%
%% Außerdem muss man eventuell davor "docstrip" explizit gestatten nicht-"sty"-Dateien zu erstellen. Das erfordert für gewöhnlich die Variable "openout_any" der verwendeten \TeX-Distribution auf "a" zu setzen. Wieder unter OS X bedeutet dies ganz konkret der Datei 
%%\begin{bsp}"/usr/local/texlive/"\meta{Jahr}"/texmf.cnf"\end{bsp}
%% die Zeile
%% \begin{bsp}"openout_any = a"\end{bsp}
%% anzuhängen.
%%
%% Wem das zu kompliziert ist, sei geraten einfach die "\usedir"- und "DeclareDir"-Befehle wegzulassen, dann landen die "bbx"- und "cbx"-Dateien einfach am selben Ort, wie die "dtx"-Datei und man kann sie danach dahin verschieben, wo man sie haben möchte, ohne sich über die Rechte von "docstrip" oder relative Verzeichnisstrukturen Gedanken machen zu müssen.
%% 
%% \section{Umsetzung}\label{driver}
%%
%% "geschichtsfrkl" besteht aus einem Bibliographieformat ("bbx") und einem Zitierformat ("cbx"). Dabei wird das "bbx"-Format auch beim zitieren (maßgeblich beim Erstzitat, das dem Bibliographieeintrag entspricht) benutzt. 
%%
%% Die ganzen tollen "biblatex"-Makros die verwendet werden, sind in der -- sowieso sehr lesenswerten -- "biblatex"-Dokumentation beschrieben. Gerade für die ganzen booleans, die uns begleiten werden, sind die Makros des -- auch sehr empfehlenswerten -- "etoolbox"-Pakets, das von "biblatex" mitgeliefert wird, sehr praktisch.
%%
%% \subsection{geschichtsfrkl.bbx}
%%
%% Wir beginnen also mit der Datei "geschichtsfrkl.bbx" und legen den "standard"-Stil von "biblatex" zu Grunde.
%%
%%    \begin{macrocode}
%%\ProvidesFile{geschichtsfrkl.bbx}%
%%               [2012/03/31 v1.1 geschichtsfrkl -- %
%%                biblatex für Historiker, bbx-Datei]
%%\RequireBibliographyStyle{standard}
%%    \end{macrocode}
%% Zunächst ein kleiner Begrüßungstext :)
%%    \begin{macrocode}
%%\AtBeginDocument{\typeout{}\typeout%
%%    {========= geschichtsfrkl -- biblatex für Historiker ========}}
%%    \end{macrocode}
%% Nun fängt die Arbeit an: Damit wir später feststellen können, ob ein Zitat oder Bibliographieeintrag erster auf seiner Seite ist, brauchen wir den "pagetracker". In diesen Fällen soll weder \enquote{ders.} noch \enquote{Ebd.} verwendet werden, sondern alles ausgeschrieben werden. Außerdem wollen wir \enquote{deutsch} sortieren und der ganze Witz ist, dass wir unicode-Zeichensatz verwenden. Das heißt dass wir auch problemlos altgriechische Titel zitieren können :)
%%    \begin{macrocode}
%%\ExecuteBibliographyOptions{%
%%  pagetracker=true,%
%%  bibencoding=utf8,%
%%  sortlocale=de%
%%}%
%%    \end{macrocode}
%%Hier muss man übrigens wirklich aufpassen, dass man keine Zeilenumbrüche an den falschen Stellen hat, sonst tauchen in der Bibliographie an komischer Stelle Leerzeichen auf. Wir setzen also vorsichtshalber ganz Konsequent ans Ende jeder Zeile ein Kommentarzeichen.
%% 
%% \begin{macro}{bbx:editorders} \begin{macro}{bbx:hrsg} \begin{macro}{bbx:jahrreihe} \begin{macro}{bbx:maintitleebd} \begin{macro}{bbx:nurinit}
%% Zunächst verarbeiten wir "BibliographyOption"s in booleans.
%%    \begin{macrocode}
%%\newbool{bbx:editorders}
%%\DeclareBibliographyOption{editorders}[true]{\csuse{bool#1}%
%%           {bbx:editorders}}
%%\newbool{bbx:hrsg}%
%%\DeclareBibliographyOption{hrsg}[true]{\csuse{bool#1}{bbx:hrsg}}%
%%\newbool{bbx:jahrreihe}%
%%\DeclareBibliographyOption{jahrreihe}[true]{\csuse{bool#1}%
%%           {bbx:jahrreihe}}%
%%\newbool{bbx:maintitleebd}%
%%\DeclareBibliographyOption{maintitleebd}[true]{\csuse{bool#1}%
%%           {bbx:maintitleebd}}
%%\newbool{bbx:nurinit}%
%%\DeclareBibliographyOption{bbx:nurinit}[true]{\csuse{bool#1}%
%%           {bbx:nurinit}}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}\end{macro}\end{macro}
%% \begin{macro}{cbx:antik} \begin{macro}{bbx:diss} \begin{macro}{cbx:frg} \begin{macro}{cbx:frgantik} 
%% Jetzt "EntryOption"s. Die meisten davon sind nur für's Zitieren relevant, heißen also "cbx". Trotzdem werden sie hier manchmal gebraucht, also jetzt schon überprüft.
%%    \begin{macrocode}
%%\newbool{cbx:antik}%
%%\DeclareEntryOption{antik}[true]{\csuse{bool#1}{cbx:antik}}%
%%\newbool{bbx:diss}%
%%\DeclareEntryOption{diss}[true]{\csuse{bool#1}{bbx:diss}}%
%%\newbool{cbx:frg}%
%%\DeclareEntryOption{frg}[true]{\csuse{bool#1}{cbx:frg}}%
%%\newbool{cbx:frgantik}%
%%\DeclareEntryOption{frgantik}[true]{\csuse{bool#1}{cbx:frgantik}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}
%% Das verhält sich fast wie "frg", also machen wir das mal mit:
%%    \begin{macrocode}
%%            \csuse{bool#1}{cbx:frg}}%
%%    \end{macrocode}\end{macro}
%% \begin{macro}{cbx:urkunde}\begin{macro}{cbx:nurshorthand}
%% Weiter als ob nichts passiert wäre:
%%    \begin{macrocode}
%%\newbool{cbx:urkunde}%
%%\DeclareEntryOption{urkunde}[true]{\csuse{bool#1}{cbx:urkunde}}%
%%\newbool{cbx:nurshorthand}%
%%\DeclareEntryOption{nurshorthand}[true]{\csuse{bool#1}%
%%              {cbx:nurshorthand}}%
%%    \end{macrocode}
%% \changes{v1.1}{2012/03/31}{Option "nurshorthand" hinzugefügt.}
%% \end{macro}\end{macro}
%% \begin{macro}{savestuff}\begin{macro}{\bbx@lasteditor} \begin{macro}{\bbx@lasthash} \begin{macro}{\bbx@lastmaintitle}
%% Um die diversen \enquote{ebd.} und \enquote{ders.} verwalten zu können müssen wir uns ziemlich genau merken, was der letzte Eintrag war (bzw. einzelne Felder davon). Das sollte zentral geschehen, da man insbesondere merken sollte wenn ein Feld (z.B. "editor") hier gar nicht besetzt ist und die Makros dann entsprechend zurücksetzen.
%%    \begin{macrocode}
%%\newbibmacro{savestuff}{%
%%   \savename{editor}{\bbx@lasteditor}%
%%   \savefield{namehash}{\bbx@lasthash}%
%%   \savefield{maintitle}{\bbx@lastmaintitle}%
%%}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}\end{macro}
%% Als nächstes werden alle möglichen Vorformatierungen der Hauptfelder zurückgesetzt. Insbesondere wollen wir die Titel nicht kursiv oder in sonst einer Art hervorheben.
%%    \begin{macrocode}
%%\DeclareFieldFormat*{title}{#1}%
%%\DeclareFieldFormat{subtitle}{#1}%
%%\DeclareFieldFormat{booktitle}{#1}%
%%\DeclareFieldFormat{booksubtitle}{#1}%
%%\DeclareFieldFormat{titlecase}{#1}%
%%\DeclareFieldFormat*{maintitle}{#1}%
%%\DeclareFieldFormat{journaltitle}{#1}%
%%\DeclareFieldFormat{pages}{#1}%
%%\DeclareFieldFormat{edition}{#1}%
%%\DeclareFieldFormat{volumes}{#1}%
%%\DeclareFieldFormat{volume}{#1}%
%%    \end{macrocode}
%% Ein paar Standardfeldformate (Klammern, Fußnoten, Anführungszeichen):
%%    \begin{macrocode}
%%\DeclareFieldFormat{parens}{\mkbibparens{#1}}%
%%\DeclareFieldFormat{brackets}{\mkbibbrackets{#1}}%
%%\DeclareFieldFormat{quotes}{\mkbibquote{#1}}%
%%    \end{macrocode}
%% \begin{macro}{\subtitlepunct}\begin{macro}{\intitlepunct}\begin{macro}{\newunitpunct}
%% Als nächstes regeln wir die Zeichenseztung: Zwischen Titel und Untertitel soll ein einfacher Punkt, nach \enquote{in} ein Doppelpunkt und unser Standardtrennzeichen soll ein Komma sein.
%%    \begin{macrocode}
%%\renewcommand*{\subtitlepunct}{\addperiod\addspace}%
%%\renewcommand*{\intitlepunct}{\addcolon\addspace}%
%%\renewcommand*{\newunitpunct}{\addcomma\addspace}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}
%% \begin{macro}{\autorenschiftart}\begin{macro}{\autorentrennzeichen}
%% Autorennachnamen werden standardmäßig in Kapitälchen gesetzt, mehrere Autoren durch Schrägstriche mit nichttrennbarem Lehrzeichen davor voneinander getrennt:
%%    \begin{macrocode}
%%\newcommand*{\autorenschriftart}{\sc}%
%%\newcommand*{\autorentrennzeichen}{\addnbspace\slash}%
%%    \end{macrocode}
%% \end{macro}\end{macro}
%% Nun beschreiben wir das Format des "author"-Feldes. Dabei steckt in "#1" der Nachname, in "#5" ein Zusatz (Bsp. \enquote{von}), in "#3" der Vorname und in "#4" die Initialien des Vornamens.
%%    \begin{macrocode}
%%\DeclareNameFormat{author}{%
%%    \end{macrocode}
%% Der Nachname steht in "\autorenschriftart", Feld "#5" wird erst überprüft, bevor es ausgegeben wird.
%%    \begin{macrocode}
%%  {\autorenschriftart%
%%   \ifblank{#5}{}{#5\addspace}%
%%   #1}%
%%    \end{macrocode}
%% Erst wird die Existenz des Vornamens überprüft. Wenn die Option "nurinit" gewählt wurde, dann werden nur die Initialien ausgegeben:
%%    \begin{macrocode}   
%%   \ifblank{#3}{}{\addcomma\space%
%%        \ifbool{bbx:nurinit}{#4}{#3}}%
%%    \end{macrocode}
%% In Wirklichkeit handelt es sich hierbei um eine Liste der Autoren, wir müssen also für das abschließende Zeichen feststellen, ob wir uns \enquote{mitten in} oder am Ende der Liste befinden. Wenn noch weitere Autoren kommen, verwenden wir "\autorentrennzeichen", ansonsten nichts.
%%    \begin{macrocode}
%%  \ifthenelse{\value{listcount}<\value{liststop}}%
%%    {\autorentrennzeichen\addspace}{}%
%%    \end{macrocode}
%% Falls beispielsweise in der "bib"-Datei Initialien angegeben wurden, der Eintrag also auf einen Punkt endet, sollte dieser als Abkürzungspunkt gekennzeichnet werden.
%%    \begin{macrocode}
%%  \isdot%
%%}%
%%    \end{macrocode}
%% Als nächstes beschäftigen wir uns mit Herausgebern. Zunächst die \enquote{konventionelle} Variante: \enquote{hrsg. v. \meta{Vorname} \meta{Nachname}}. Mehrere Namen werden durch Kommata und ein abschließendes \enquote{und} getrennt. 
%%    \begin{macrocode}
%%\DeclareNameFormat{editor}{%
%%    \end{macrocode}
%% Zuerst das gleiche Spiel mit Vor- und Nachnamen wie gerade eben (nur diesmal eben andersrum):
%%    \begin{macrocode}
%%   \ifblank{#3}{}{%
%%        \ifbool{bbx:nurinit}{#4}{#3}\addspace}%
%%    \ifblank{#5}{}{#5\addspace}%
%%    #1%
%%    \end{macrocode}
%% Wenn wir vor Stelle "liststop-1" sind, soll ein Komma ausgegeben werden, an der Stelle ein \enquote{und} und sonst nichts:
%%    \begin{macrocode}
%%    \ifnumcomp{\value{listcount}}{<}{\value{liststop}-1}%
%%       {\addcomma\addspace}%
%%       {\ifnumcomp{\value{listcount}}{=}{\value{liststop}}%
%%           {}{\addspace\bibstring{and}\addspace}}%
%%}%
%%    \end{macrocode}
%% Bei der "hrsg"-Optionen stehen die Herausgeber mit Nachnamen zuerst und werden durch Schrägstriche getrennt:
%%    \begin{macrocode}
%%\DeclareNameFormat{hrsg}{%
%%   \ifblank{#5}{}{#5\addspace}%
%%  #1%
%%  \ifblank{#3}{}{\addcomma\space%
%%        \ifbool{bbx:nurinit}{#4}{#3}}%
%%  \ifthenelse{\value{listcount}<\value{liststop}}%
%%        {\addnbspace\slash\addspace}{}%
%%}%
%%    \end{macrocode}
%% \begin{macro}{\orttrennzeichen}
%% Mehrere Orte werden durch "\orttrennzeichen" (Standardmäßig einen Schrägstrich) Getrennt:
%%    \begin{macrocode}
%%\newcommand*{\orttrennzeichen}{\addnbspace\slash\addspace}%
%%\DeclareListFormat{location}{%
%%  #1\ifthenelse{\value{listcount}<\value{liststop}}%
%%          {\orttrennzeichen}{}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{\bibnamedash}
%% \begin{macro}{\bibnamedashOrig}
%% Bei wiederholtem Zitieren des selben Autors schreiben wir \enquote{ders.}. Das wird traditionell in dem Makro "\bibnamedash" gespeichert. Da es schade um seinen ursprünglichen Inhalt wäre, speichern wir diesen in "\bibnamedashOrig". Wenn das "gender"-Feld im "bib"-Eintrag ausgefüllt wurde, so wird das hier berücksichtigt. Mit "\bibsentence" sorgen wir für die richtige Groß- und Kleinschreibung.
%%    \begin{macrocode}
%%\let\bibnamedashOrig\bibnamedash%
%%\renewcommand*{\bibnamedash}{%
%%      \bibsentence\bibstring{idem\thefield{gender}}}%
%%    \end{macrocode}
%% \end{macro}\end{macro}
%% Als nächstes beschreiben wir die "bibmacro"s. Hier passiert eigentlich alles spannende. Sowohl die Bibliographieeinträge, als auch die Zitate werden aus diesen Makros zusammengesetzt werden.
%%
%% \begin{macro}{in:}
%% Wir fangen ganz einfach an: Bei Formaten wie "@inbook" gibt es das Feld \enquote{in}:
%%    \begin{macrocode}
%%\renewbibmacro*{in:}{%
%%  \printtext{\bibstring{in}\intitlepunct}%
%%}%
%%    \end{macrocode}
%%\end{macro}
%%\begin{macro}{author}
%% Schon etwas spannender: Das Autorenfeld. Wiederholtes zitieren desselben Autors ersetzt den Namen durch "\bibnamedash" (außer wenn es der erste Eintrag auf der Seite ist). Dazu wird das von "biblatex" generierte Feld "namehash" als Vergleich benutzt. Gespeicher wird das durch den Makro "savestuff" der hoffentlich nachher noch irgendwann aufgerufen wird.
%%    \begin{macrocode}
%%\renewbibmacro*{author}{%
%%  \ifnameundef{author}{}%
%%      {\ifthenelse{\iffieldequals{namehash}{\bbx@lasthash}%
%%                     \AND\NOT\iffirstonpage}%
%%            {\bibnamedash}%
%%            {\printnames{author}\isdot}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{author/editor}
%% Nun überprüfen wir, ob es überhaupt einen Autor gibt. Wenn nicht, wird dieser durch den Herausgeber ersetzt (allerdings im Autor-Format). Das passiert auch, wenn wir ein Fragment sind. Auch hier wird der Name bei wiederholtem Zitieren ersetzt. In diesem Fall folgt dem Namen immer \enquote{(Hrsg.)}
%%    \begin{macrocode}
%%\renewbibmacro*{author/editor}{%
%%   \ifboolexpr{test{\ifnameundef{author}} or bool{cbx:frg}}{%
%%        \ifthenelse{\iffieldequals{namehash}{\bbx@lasthash}%
%%                   \AND\NOT\iffirstonpage}%
%%             {\bibnamedash}%
%%             {\printnames[author]{editor}\isdot% (Hrsg.)
%%               \addspace\printtext[parens]{\bibstring{editor}}}%
%%   }{\usebibmacro{author}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{series+number}
%% Für gewöhnlich möchten wir (\meta{Reihentitel} \meta{Reiheinnummer}) ausgeben, also ("series" "number"), aber natürlich nur, wenn die Felder gesetzt sind. In der Antike macht man das aber anders: da schreibt man \enquote{Bd.} davor, dreht die Reihenfolge um und setzt keine Klammern:
%%    \begin{macrocode}
%%\renewbibmacro*{series+number}{%
%%   \ifbool{cbx:antik}{%antike Extrawurst
%%     \iffieldundef{series}{}{%
%%       \iffieldundef{number}{}{%
%%          \printtext{Bd}\adddot\addspace%
%%          \printfield{number}\addcolon\addspace}%
%%       \printfield{series}\setunit{\addcomma\addspace}}%
%%   }{%
%%     \iffieldundef{series}{}{%
%%        \printtext[parens]{%
%%           \printfield{series}%
%%           \setunit*{\addspace}%
%%           \printfield{number}%
%%           \newunit%
%%         }%
%%       }%
%%    }%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% Durch "\setunit*" wird das Leerzeichen nur gesetzt, wenn davor tatsächlich etwas ausgegeben wurde.
%%
%% \begin{macro}{journal}
%% Als nächstes behandeln wir Zeitschriftentitel. Diese werden \enquote{sicherheitshalber} im Format "titlecase" ausgegeben (das tut standardmäsig nichts).
%%    \begin{macrocode}
%%\renewbibmacro*{journal}{%
%%  \iffieldundef{journaltitle}
%%    {}
%%    {\printtext[journaltitle]{%
%%          \printfield[titlecase]{journaltitle}%
%%          \setunit{\subtitlepunct}%
%%          \printfield[titlecase]{journalsubtitle}}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{year}
%% Das Jahr wird stets in Klammern ausgegeben.
%%    \begin{macrocode}
%%\newbibmacro{year}{%
%%  \iffieldundef{year}{}{\printfield[parens]{year}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{journal+number+year}
%% Bei "@article" wird Zeitschriftennamen Nummer (Jahr), also "journal" "number" ("year") ausgegeben.
%%    \begin{macrocode}
%%\newbibmacro*{journal+number+year}{%
%%  \usebibmacro{journal}%
%%  \setunit*{\addspace}%
%%  \printfield{number}%
%%  \setunit*{\addspace}%
%%  \usebibmacro{year}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{pages}
%% Ganz langweilig: Seitenzahlen. Man muss nur aufpassen, dass ein Punkt am Ende (Bsp: 182f.) nicht überinterpretiert wird.
%%    \begin{macrocode}
%% \newbibmacro*{pages}{%
%%   \printfield{pages}\isdot}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{maintitle+title+volumes}
%% Beim Titel muss man ein wenig aufpassen. Im einfachsten Fall gibt es nur ein Band, dann schreiben wir einfach "title." "subtitle." "titleaddon". Bei einem Teil eines Sammelbandes kommt noch ein "maintitle" dazu. Wenn es sich hingegen um mehrere Bände handelt unterscheiden wir zwischen einem einzelnen Band und der gesamten Reihe. Das entscheidet letztendlich des Feld "volumes".
%%    \begin{macrocode}
%%\newbibmacro*{maintitle+title+volumes}{%
%%    \end{macrocode}
%% Zuerst überprüfen wir, ob die Felder überhaupt unterschiedlich sind.
%%    \begin{macrocode}
%%  \iffieldsequal{maintitle}{title}
%%    {\clearfield{maintitle}%
%%     \clearfield{mainsubtitle}%
%%     \clearfield{maintitleaddon}}
%%    {\iffieldundef{maintitle}{}%
%%    \end{macrocode}
%% Darum kümmern wir uns gleich.
%%    \begin{macrocode}
%%       {\usebibmacro{maintitle}%
%%      	\newunit\newblock
%%    \end{macrocode}
%% Bei antiken Sachen verzichten wir auf das alles und geben nur den Titel aus.
%%    \begin{macrocode}
%%         \ifbool{cbx:antik}%
%%            {\usebibmacro{title}\addcomma\addspace}
%%            {\iffieldundef{volume}
%%                {\iffieldundef{volumes}{}{%
%%    \end{macrocode}
%% Wenn es also das Feld "volumes" gibt, geben wir so etwas wie \enquote{"volumes" Bde.} und \emph{keinen} Einzeltitel aus.
%%    \begin{macrocode}
%%                   \printfield{volumes}%
%%                   \addspace\printtext{\bibstring{volumes}}\newunit}}%
%%    \end{macrocode}
%% Jetzt sind wir im Fall: "volume" aber kein "volumes", also: einzelnes Band eines mehrbändigen Werkes. Dann geben wir so etwas wie \enquote{Bd. "volume": "title"} aus.
%%    \begin{macrocode}
%%               {\printtext{\bibstring{volume}}\addspace%
%%                 \printfield{volume}\setunit*{\addcolon\addspace}}%
%%        }}}%
%%    \end{macrocode}
%% In allen Fällen \emph{außer} wenn es das Feld "volumes" gibt, wird nun also "title" ausgegeben.
%%    \begin{macrocode}        
%%   \iffieldundef{volumes}{\usebibmacro{title}}{}%
%%   \newunit}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{maintitle}
%% Nun -- wie versprochen -- die Ausgabe von "maintitle". Wir schauen erst, ob weder "maintitle" noch "mainsubtitle" definiert sind. Wenn wir mindestens eins haben, machen wir uns an die Ausgabe.
%%    \begin{macrocode}
%%\renewbibmacro*{maintitle}{%
%%  \ifboolexpr{test {\iffieldundef{maintitle}}%
%%    and test {\iffieldundef{mainsubtitle}}}{}%
%%    \end{macrocode}
%% Hier kommt nun die Option "maintitlesebd" zum tragen. Wenn diese gesetzt ist und wir zwei aufeinanderfolgende gleiche "maintitle"s haben und nicht der erste auf einer Seite sind, so wird dieser durch \enquote{ebd.} ersetzt:
%%    \begin{macrocode}
%%    {\ifboolexpr{bool {bbx:maintitleebd} and%
%%           test {\iffieldequals{maintitle}{\bbx@lastmaintitle}} and%
%%           not (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%        {\bibstring{ibidem}}%
%%    \end{macrocode}
%% Ansonsten wickeln wir brav wieder alle Felder in ihre zugehörigen Formate (die nur eben alle leer sind ...) und geben sie bei Bedarf aus.
%%    \begin{macrocode}
%%        {\printtext[maintitle]{%
%%          \printfield[titlecase]{maintitle}%
%%            \setunit*{\subtitlepunct}%
%%          \printfield[titlecase]{mainsubtitle}}%
%%            \setunit*{\subtitlepunct}}%
%%    \printfield{maintitleaddon}\isdot}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{title}
%% Beim normalen Titel passiert letztendlich das gleiche: Bei Bedarf wird alles ausgegeben.
%%    \begin{macrocode}
%%\renewbibmacro*{title}{%
%%  \ifboolexpr{test {\iffieldundef{title}} and%
%%              test {\iffieldundef{subtitle}}}{}%
%%    {\printtext[title]{%
%%       \printfield[titlecase]{title}%
%%       \setunit*{\subtitlepunct}%
%%       \printfield[titlecase]{subtitle}}%
%%     \setunit*{\subtitlepunct}}%
%%  \printfield{titleaddon}\isdot}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{location+edition+year}
%% Nun geben wir Ort, Ausgabe und Jahr aus. Dabei ist die Ausgabe dem Jahr vorne als Exponent angehängt, wenn sie eine Zahl ist. Sonst wird sie einfach normal ausgegeben. Dabei wird "location" im oben angegebenen Format ausgegeben. Da das Jahr hier nicht in Klammern gesetzt wird, verwenden wir "\printfield" statt dem Makro von oben.
%%    \begin{macrocode}
%%\newbibmacro*{location+edition+year}{%
%%  \printlist{location}%
%%  \iffieldundef{edition}{\setunit{\addspace}}{%
%%       \iffieldint{edition}%
%%           {\setunit{\addspace}%
%%             \mkbibsuperscript{\printfield{edition}}}%
%%           {\setunit{\addcomma\addspace}%
%%             \printfield{edition}\addcomma\addspace}}%
%%  \printfield{year}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{addendum}
%% Das "addendum" Feld missbrauchen wir, um Informationen zum Nachdruck darein zu schreiben. Das wird dann zusammen mit \enquote{ND} ausgegeben:
%%    \begin{macrocode}
%%\newbibmacro*{addendum}{%
%%  \iffieldundef{addendum}{}{%
%%    \printtext[parens]{ND\addspace\printfield{addendum}}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{signatur}
%% Wenn man eine Signatur angeben möchte, so kann man diese in das "note"-Feld schreiben, die kommt dann ans Ende. Insbesondere vernichtet sie den abschließenden Punkt des Eintrags!
%%    \begin{macrocode}
%%\newbibmacro*{signatur}{%
%%  \iffieldundef{note}{}{\printtext[parens]{\printfield{note}}\nopunct}%  
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{booktitle+volume+editor}
%% Als nächstes möchten wir uns um Buchtitel, ggf. Band und Herausgeber von Sammelbänden ("@inbook") kümmern.
%%    \begin{macrocode}
%%\newbibmacro*{booktitle+volume+editor}{%
%%    \end{macrocode}
%% Wenn es keinen Herausgeber gibt, so geben wir nur den Titel ggf. gefolgt vom Band aus.
%%    \begin{macrocode}
%%  \ifnameundef{editor}{
%%    \usebibmacro{maintitle}%
%%    \newunit
%%    \iffieldundef{volume}{}%
%%      {\bibstring{volume}\addspace\printfield{volume}\newunit}%  
%%  }{%
%%    \end{macrocode}
%% Andernfalls kommt hier jetzt die "hrsg"-Option ins Spiel. Wenn diese gesetzt ist, wird statt \enquote{"maintitle", Bd. "volume", hrsg. v. "editor"} der Name "editor" in umgekehrter Reihenfolge ausgegeben und von \enquote{(Hrsg.): "maintitle", Bd. "volume"} gefolgt. Wenn die Option "editorders" gesetzt ist, wird zudem nach den gleichen Regeln wie sonst auch "editor" durch \enquote{ders.} ersetzt. Dabei wird "\bbx@lasteditor" im Makro "savestuff" immer mit dem aktuellen Feld "editor" versehen. Das geschieht ganz am Ende, wir müssen uns hier also nicht drum kümmern.
%%    \begin{macrocode}
%%    \ifbool{bbx:hrsg}{% 
%%      \ifboolexpr{bool {bbx:editorders} and%
%%             test {\ifnameequals{editor}{\bbx@lasteditor}} and%
%%             not (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%           {\bibstring{idem\thefield{gender}}}%
%%           {\printnames[hrsg]{editor}\addspace}%
%%      \printtext[parens]{\bibstring{editor}}\addcolon\addspace%
%%      \usebibmacro{maintitle}%
%%      \iffieldundef{volume}{}%
%%        {\newunit\bibstring{volume}\addspace\printfield{volume}}%  
%%      \newunit%
%%     }{%
%%      \usebibmacro{maintitle}%
%%      \iffieldundef{volume}{}%
%%        {\newunit\bibstring{volume}\addspace\printfield{volume}}%  
%%      \newunit%
%%      \printtext{hrsg\adddot\addspace v\adddot}%
%%      \setunit{\addspace}%
%%      \ifboolexpr{bool {bbx:editorders} and%
%%               test {\ifnameequals{editor}{\bbx@lasteditor}} and%
%%               not (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%        {\bibstring{idem\thefield{gender}}}%
%%        {\printnames{editor}}%
%%     }}%
%%}%
%%    \end{macrocode}
%% \changes{v1.1}{2012/03/31}{"volume"-Feld bei "@inbook" hinzugefügt.}
%% \end{macro}
%% \begin{macro}{reftitle}
%% Bei Lexikoneinträgen steht vorm Titel \enquote{Art.}, dann kommt der Titel gefolgt von ["number"] in Anführungszeichen:
%%    \begin{macrocode}
%%\newbibmacro*{reftitle}{%
%%  \iffieldundef{title}{}{%
%%    \printtext{Art\adddot\addspace}%
%%    \printtext[quotes]{%
%%      \usebibmacro{title}\setunit{\addspace}%
%%      \iffieldundef{number}{}{\printfield[brackets]{number}}%
%%}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{refmaintitle}
%% Der Titel des Lexikons steht im Feld "maintitle". Er wird zusammen mit "volume" ausgegeben.
%%    \begin{macrocode}
%%\newbibmacro*{refmaintitle}{%
%%  \iffieldundef{maintitle}{}{%
%%    \printfield{maintitle}\setunit*{\addspace}\printfield{volume}%
%%}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{reztitle}
%% Bei Rezensionen scheitern wir daran, dass es bei "biblatex" keine wirklich gute Möglichkeit gibt, den Autor und Titel des rezensierten Werkes in seperate Felder zu schreiben und das so wieder zusammen zu bauen. Daher ist die aktuelle Lösung einfach die gesamte Bibliographische Angabe zum rezensierten Werk in das "title"-Feld zu schreiben. Das wird dann in Anführungszeichen ausgegeben.
%%    \begin{macrocode}
%%\newbibmacro*{reztitle}{%
%%  \printtext[quotes]{%
%%    \usebibmacro{title}%
%%}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{antikzeugs}
%% Bei antiken Autoren brauchen wir eventuell eine Sprache und einen Übersetzer. Das ist entweder der "editor" oder der "translator".
%%    \begin{macrocode}
%%\newbibmacro*{antikzeugs}{%
%%  \iflistundef{language}{}{%
%%    \printlist{language}\isdot%
%%    \setunit{\addcomma\addspace}%
%%  }%
%%  \ifboolexpr{test {\ifnameundef{translator}}%
%%             and test {\ifnameundef{editor}}}{}{%
%%    \printtext{hrsg\adddot\addspace u\adddot\addspace%
%%                   übers\adddot\addspace v.}\isdot\addspace%
%%    \ifnameundef{translator}{\printnames{editor}}%
%%               {\printnames[editor]{translator}}%
%%    \setunit{\addcomma\addspace}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% Das war es nun auch schon an Makros für die Bibliographie. Nun kommt nur noch die Definition der "BibliographyDriver", also der Punkt, an dem die ganzen Makros sinnvoll zu Bibliographieeinträgen verklebt werden.
%%
%% \begin{macro}{@article}
%% Zuerst "@article". "bibindex" und "begentry" sind "biblatex"-interne Makros an denen wir nichts geändert haben. Genauso "url+urldate" und "finentry". Am Ende wird immer "savestuff" aufgerufen, um alle Informationen des Eintrags für das Verhalten des Nächsten zu speichern (unabhängig davon welcher Art der nächste Eintrag ist!)
%%    \begin{macrocode}
%%\DeclareBibliographyDriver{article}{%
%%  \usebibmacro{bibindex}%
%%  \usebibmacro{begentry}%
%%  \usebibmacro{author}%
%%  \setunit{\addcolon\addspace}\newblock%
%%  \usebibmacro{title}%
%%  \newunit\newblock
%%  \usebibmacro{in:}%
%%  \usebibmacro{journal+number+year}%
%%  \newunit\newblock
%%  \usebibmacro{pages}%
%%  \setunit{\addspace}
%%  \usebibmacro{url+urldate}%
%%  \setunit{\addperiod\addspace}%
%%  \usebibmacro{signatur}%
%%  \usebibmacro{savestuff}%
%%  \usebibmacro{finentry}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{@book}
%% "@book" funktioniert essenziell genauso.
%%    \begin{macrocode}
%%\DeclareBibliographyDriver{book}{%
%%  \usebibmacro{bibindex}%
%%  \usebibmacro{begentry}%
%%  \usebibmacro{author/editor}%
%%  \setunit{\addcolon\addspace}\newblock%
%%  \usebibmacro{maintitle+title+volumes}%
%%  \setunit{\addspace}%
%%    \end{macrocode}
%% Hier wird noch die Option "jahrreihe" berücksicht, die bei Bedard die Angaben zur Reihe hinter das Jahr verschiebt.
%%    \begin{macrocode}
%%  \ifbool{bbx:jahrreihe}{}%
%%    {\usebibmacro{series+number}}%
%%  \newunit\newblock%
%%    \end{macrocode}
%% Bei antiken Quellen muss hier die Information zum Übersetzer und zur Sprache stehen.
%%    \begin{macrocode}
%%  \ifbool{cbx:antik}{%
%%    \usebibmacro{antikzeugs}}{}%
%%    \end{macrocode}
%% Bei Dissertationen erscheint hier der Zusats \enquote{Diss.}.
%%    \begin{macrocode}
%%  \ifbool{bbx:diss}{%
%%    \printtext{Diss\adddot}\setunit{\addspace}}{}%
%%  \usebibmacro{location+edition+year}%
%%  \setunit{\addspace}%
%%    \end{macrocode}
%% Und hierhin wird die Reihe bei Option "jahrreihe" verschoben.
%%    \begin{macrocode}
%%  \ifbool{bbx:jahrreihe}{%
%%    \usebibmacro{series+number}%
%%    \setunit{\addspace}}{}%
%%  \usebibmacro{addendum}%
%%  \setunit{\addspace}%
%%  \usebibmacro{url+urldate}%
%%  \setunit{\addperiod\addspace}%
%%  \usebibmacro{signatur}%
%%  \usebibmacro{savestuff}%
%%  \usebibmacro{finentry}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{@inbook}
%% Bei "@inbook" passiert nichts wirklich neues, außer dass eben die dafür relevanten Makros aufgerufen werden. Auch hier muss "jahrreihe" berücksichtigt werden.
%%    \begin{macrocode}  
%%\DeclareBibliographyDriver{inbook}{%
%%  \usebibmacro{bibindex}%
%%  \usebibmacro{begentry}%
%%  \usebibmacro{author}%
%%  \ifnameundef{author}{}%
%%    {\setunit*{\addcolon\addspace}\newblock}%
%%  \usebibmacro{title}%
%%  \newunit\newblock
%%  \usebibmacro{in:}%
%%  \usebibmacro{booktitle+volume+editor}%
%%  \setunit{\addspace}%
%%  \ifbool{bbx:jahrreihe}{}%
%%    {\usebibmacro{series+number}}%
%%  \newunit\newblock%
%%  \usebibmacro{location+edition+year}%
%%  \ifbool{bbx:jahrreihe}{%
%%    \setunit{\addspace}%
%%    \usebibmacro{series+number}}{}%
%%  \newunit\newblock%
%%  \usebibmacro{pages}%
%%  \setunit{\addspace}%
%%  \usebibmacro{addendum}%
%%  \setunit{\addspace}%
%%  \usebibmacro{url+urldate}%
%%  \setunit{\addperiod\addspace}%
%%  \usebibmacro{signatur}%
%%  \usebibmacro{savestuff}%
%%  \usebibmacro{finentry}%
%%}%
%%    \end{macrocode}
%% \changes{v1.1}{2012/04/01}{Kein Doppelpunkt ohne Autorennamen.}
%% \end{macro}
%% \begin{macro}{@collection}\begin{macro}{@incollection}
%% "@collections" sind bei uns einfach Bücher.
%%    \begin{macrocode}
%%\DeclareBibliographyAlias{collection}{book}
%%\DeclareBibliographyAlias{incollection}{inbook}
%%    \end{macrocode}
%% \end{macro}\end{macro}
%% \begin{macro}{@inreference}
%% "@inreference" kümmert sich um Lexikoneinträge.
%%    \begin{macrocode}
%%\DeclareBibliographyDriver{inreference}{%
%%  \usebibmacro{bibindex}%
%%  \usebibmacro{begentry}%
%%  \usebibmacro{author}%
%%  \setunit{\addcolon\addspace}\newblock%
%%  \usebibmacro{reftitle}%
%%  \newunit\newblock%
%%  \usebibmacro{in:}%
%%  \usebibmacro{refmaintitle}%
%%  \setunit{\addspace}%
%%  \usebibmacro{year}%
%%  \newunit\newblock%
%%  \usebibmacro{pages}%
%%  \setunit{\addspace}%
%%  \usebibmacro{url+urldate}%
%%  \setunit{\addperiod\addspace}%
%%  \usebibmacro{signatur}%
%%  \usebibmacro{savestuff}%
%%  \usebibmacro{finentry}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{@review}
%% Und "@review" um Rezensionen.
%%    \begin{macrocode}
%%\DeclareBibliographyDriver{review}{%
%%  \usebibmacro{bibindex}%
%%  \usebibmacro{begentry}%
%%  \usebibmacro{author}%
%%  \setunit{\addspace}%
%%  \printtext[parens]{Rez\adddot}%
%%  \setunit{\addcolon\addspace}\newblock%
%%  \usebibmacro{reztitle}%
%%  \newunit\newblock
%%  \usebibmacro{in:}%
%%  \usebibmacro{journal+number+year}%
%%  \newunit\newblock%
%%  \usebibmacro{pages}%
%%  \setunit{\addspace}%
%%  \usebibmacro{url+urldate}%
%%  \setunit{\addperiod\addspace}%
%%  \usebibmacro{signatur}%
%%  \usebibmacro{savestuff}%
%%  \usebibmacro{finentry}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% So, das war's!
%% \iffalse
%%</bbx>
%% \fi
%%
%% \subsection{geschichtsfrkl.cbx}
%% \setcounter{CodelineNo}{0}
%%
%% Nun werden die eigentlichen Zitate gemacht. Ganz am Ende der Datei werden die Befehle "\cite" und Freunde definiert, die rufen aber nur Makros auf, die davor hoffentlich schon alles entscheidende regeln. Gerade für reine Formatierungsfragen werden wir dabei ziemlich oft auf Makros aus der "bbx"-Datei zurückgreifen.
%%
%% \iffalse
%%<*cbx>
%% \fi
%%    \begin{macrocode}
%%\ProvidesFile{geschichtsfrkl.cbx}%
%%           [2012/03/31 v1.1 geschichtsfrkl -- %
%%            biblatex für Historiker, cbx-Datei]%
%%    \end{macrocode}
%% Wir fangen wieder damit an, die "biblatex"-Optionen, die wir brauchen, zu setzen. Wir wollen den "citetracker" verwenden, der uns sagt, ob ein Werk bereits zitiert wurde oder nicht, sowie den "idemtracker" und den "ibidtracker", die uns sagen, ob wir das selbe Werk oder zumindest den selben Autor mehrfach hintereinander zitieren. "opcittracker" und "loccittracker" verwirren nur, daher machen wir das lieber selbst~:) "sortcites" wollen wir auch nicht, man sollte schon selbst beim zitieren auf die richtige Reihenfolge achten!
%%    \begin{macrocode}
%%\ExecuteBibliographyOptions{%
%%  citetracker=true,%
%%  idemtracker=true,%
%%  ibidtracker=true,%
%%  opcittracker=false,%
%%  loccittracker=false,%
%%  sortcites=false%
%%}%
%%    \end{macrocode}
%% \begin{macro}{cbx:seen}
%% Da im "postnote"-Bereich "\ifciteseen" nicht mehr funktioniert (das Zitat ist ja schon geschehen, also liefert "\ifciteseen" immer "true"), müssen wir den \enquote{echten} Wert rechtzeitig abspeichern.
%%    \begin{macrocode}
%%\newbool{cbx:seen}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{cbx:mitjahr}\begin{macro}{cbx:mitvn}\begin{macro}{cbx:mits}\begin{macro}{cbx:fnverweise} \begin{macro}{cbx:jahrkeineklammern}\begin{macro}{cbx:neueseitevollzitat}\begin{macro}{cbx:antikebd}
%% Als nächstes verwandeln wir wieder alle Paketoptionen in booleans.
%%    \begin{macrocode}
%%\newbool{cbx:mitjahr}%
%%\newbool{cbx:mitvn}%
%%\newbool{cbx:mits}%
%%\newbool{cbx:fnverweise}%
%%\newbool{cbx:jahrkeineklammern}%
%%\newbool{cbx:neueseitevollzitat}%
%%\newbool{cbx:antikebd}%
%%\DeclareBibliographyOption{mitjahr}[true]{\csuse{bool#1}%
%%             {cbx:mitjahr}}%
%%\DeclareBibliographyOption{mitvn}[true]{\csuse{bool#1}%
%%             {cbx:mitvn}}%
%%\DeclareBibliographyOption{mits}[true]{\csuse{bool#1}{cbx:mits}}%
%%\DeclareBibliographyOption{fnverweise}[true]{\csuse{bool#1}%
%%             {cbx:fnverweise}}%
%%\newbool{cbx:ibidpages}%
%%\DeclareBibliographyOption{ibidpages}[true]{\csuse{bool#1}%
%%             {cbx:ibidpages}}%
%%\DeclareBibliographyOption{jahrkeineklammern}[true]{\csuse{bool#1}%
%%             {cbx:jahrkeineklammern}}%
%%\DeclareBibliographyOption{neueseitevollzitat}[true]{\csuse{bool#1}%
%%             {cbx:neueseitevollzitat}}%
%%\DeclareBibliographyOption{antikebd}[true]{\csuse{bool#1}%
%%             {cbx:antikebd}}%
%%    \end{macrocode}
%% \changes{v1.1}{2012/03/31}{Option "antikebd" hinzugefügt.}
%% \end{macro}\end{macro}\end{macro}\end{macro}\end{macro}\end{macro}\end{macro}
%% 
%% \begin{macro}{cbx:nurinit}
%% Die Optionen für Vornamen aus der "bbx"-Datei sind \enquote{stärker}, übertragen sich also ggf. auf die Optionen hier:
%%    \begin{macrocode}
%%\newbool{cbx:nurinit}%
%%\DeclareBibliographyOption{citeinit}[true]{\csuse{bool#1}%
%%             {cbx:nurinit}}%
%%\AtBeginDocument{\ifbool{bbx:nurinit}%
%%             {\global\booltrue{cbx:nurinit}}{}}%
%%    \end{macrocode}
%% \end{macro}
%% Standardmäßig sind die Optionen "citeinit", "mitjahr" und "neueseitevollzitat" aktiviert.
%%    \begin{macrocode}
%%\ExecuteBibliographyOptions{citeinit,mitjahr,neueseitevollzitat}%
%%    \end{macrocode}
%% Zunächst ein paar kleine Formatierungssachen: "prenote", "postnote" und "shorttitle" sollen ohne Formatierung ausgegeben werden, wenn "prenote" mit einem Punkt endet (z.B. \enquote{vgl.}) sollte dieser als Abkürzungspunkt gekennzeichnet werden.
%%    \begin{macrocode}
%%\DeclareFieldFormat{prenote}{#1\isdot}%
%%\DeclareFieldFormat{postnote}{#1}%
%%\DeclareFieldFormat{shorttitle}{#1}%
%%    \end{macrocode}
%% Bei Fragmenten wird nur der Nachname des Herausgebers angegeben. Mehrere Herausgeber werden durch Schrägstriche voneinander getrennt.
%%    \begin{macrocode}
%%\DeclareNameFormat{frg}{%
%%  #1%
%%  \ifthenelse{\value{listcount}<\value{liststop}}%
%%    {\addspace\slash\addspace}{}%
%%}%
%%    \end{macrocode}
%% \begin{macro}{\multicitedelim}
%% Das Trennzeichen zwischen mehreren Zitaten bei "\cites" ist ein Semikolon.
%%    \begin{macrocode}
%%\renewcommand*{\multicitedelim}{\setunit{\addsemicolon\addspace}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{\citeautorenschriftart}\begin{macro}{\citeautorentrennzeichen}
%% Die Makros "\citeautorenschrifartt" und "\citeautorentrennzeichen" verhalten sich genau wie "\autorenschriftart" und "\autorentrennzeichen" aus der "bbx"-Datei.
%%    \begin{macrocode}
%%\newcommand*{\citeautorenschriftart}{\sc}%
%%\newcommand*{\citeautorentrennzeichen}%
%%                         {\addnbspace\slash\addspace}%
%%    \end{macrocode}
%% \end{macro}\end{macro}
%% Beim Erstzitat werden Autorennamen genau wie in der Bibliographie formatiert. Danach entsprechend "cite:author". Vor allem werden die Optionen "mitvn" und "citeinit" berücksichtigt (standardmäßig werden Vornamen ganz unterdrückt).
%%    \begin{macrocode}
%%\DeclareNameFormat{cite:author}{%
%%  {\citeautorenschriftart%
%%   \ifblank{#5}{}{#5\addspace}%
%%   #1}%
%%  \ifbool{cbx:mitvn}{%
%%      \ifblank{#3}{}{\addcomma\space%
%%            \ifbool{cbx:nurinit}{#4}{#3}}}{%
%%    \end{macrocode}
%% "citeinit" funktioniert auch ohne "mitvn".
%%    \begin{macrocode}
%%      \ifbool{cbx:nurinit}{\addcomma\addspace#4}{}%
%%    }%
%%  \ifthenelse{\value{listcount}<\value{liststop}}%
%%    {\citeautorentrennzeichen}{}%
%%  \isdot%
%%}%
%%    \end{macrocode}
%% \begin{macro}{prenote}
%% Fangen wir nun vorne an: mit dem "prenote"-Bereich. Hier wird einfach das Feld ausgegeben.
%%    \begin{macrocode}
%%\renewbibmacro*{prenote}{%
%%  \iffieldundef{prenote}{}%
%%    {\printfield{prenote}%
%%     \setunit{\addspace}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{postnote}
%% Das "postnote"-Feld ist schon komplizierter. Wenn bei einem Erstzitat (also "cbx:seen" ist "false") das Feld "pages" gesetzt ist, stoßen hier zwei Seitenzahlen aufeinander, die \enquote{aktuelle} soll also durch \enquote{hier} eingeleitet werden. Ausnahme hierfür sind Urkunden, denn die haben wenn überhaupt Zeilenzahlen also ist eine Verwechslung ausgeschlossen.
%%
%% Zuerst müssen wir aber noch das Komma \enquote{nachschieben}. Aber nur, wenn wir kein Freakformat sind.
%%    \begin{macrocode}
%%\renewbibmacro*{postnote}{%
%%  \ifboolexpr{bool {cbx:antik}%
%%           or bool {cbx:frg}%
%%           or bool {cbx:frgantik}}%
%%              {\setunit{\addspace}}%
%%              {\newunit}%
%%  \iffieldundef{postnote}{}%
%%    {\ifboolexpr{not bool {cbx:seen}%
%%             and not test {\iffieldundef{pages}}%
%%             and not bool {cbx:urkunde}}%
%%              {\printtext{hier}\addspace}{}%
%%    \end{macrocode}
%% Wenn das Werk die Option "antik" hat, soll einfach immer die "postnote" ausgegeben werden. Bei Fragmenten zusätzlich der Herausgeber, entsprechend formatiert.
%%    \begin{macrocode}
%%     \ifboolexpr{bool{cbx:antik} or bool{cbx:frg}}{%
%%       \ifbool{cbx:antik}{\printfield{postnote}}{}%
%%       \ifbool{cbx:frg}{%
%%         \printfield{postnote}\addspace%
%%         \ifnameundef{shorteditor}%
%%           {\printnames[frg]{editor}\addperiod}%
%%           {\printnames[frg]{shorteditor}\addperiod}%
%%       }{}%
%%     }{%
%%    \end{macrocode}
%% Normalerweise gilt aber: Wenn wir gleiches Werk an gleicher Stelle zitieren (\enquote{ebd.}, nur leider funktioniert "\ifciteibid" nicht mehr, da wir den eigentlichen "cite"-Teil schon verlassen haben, daher Überprüfung mit "\cbx@lastentrykey") wollen wir normalerweise die Seitenzahl nicht noch einmal ausgeben. Wenn die Option "ibidpages" gesetzt wurde oder wir mit der Option "neueseitevollzitat" auf einer neuen Seite sind, soll die Seitenzahl aber in jedem Fall ausgegeben werden.
%%    \begin{macrocode}
%%       \ifboolexpr{test {\iffieldequals{postnote}{\cbx@lastpagenumber}}%
%%           and test {\iffieldequals{entrykey}{\cbx@lastentrykey}}%
%%           and not (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})%
%%           and not bool {cbx:ibidpages}}{}{%
%%    \end{macrocode}
%% Wenn das alles nicht zutrifft wird also die Seitenzahl ausgegeben. Die Option "mits" entscheidet darüber ob ihr ein \enquote{S.} vorangestellt wird.
%%    \begin{macrocode}           
%%         \ifbool{cbx:mits}{\printtext{S\adddot\addspace}}{}%
%%         \printfield{postnote}%
%%       }%
%%     }%
%%   }%
%%    \end{macrocode}
%% \begin{macro}{\cbx@lastpagenumber} \begin{macro}{\cbx@lastentrykey}
%% Das alles (hier ist die Fußnote wirklich zu ende!) wird mit einem Punkt abgeschlossen und der Wert des Feldes "postnote" zum Vergleich in "\cbx@lastpagenumber" geschrieben, der Wert von "entrykey" in "\cbx@lastentrykey".
%%    \begin{macrocode}
%%   \setunit{\addperiod}%
%%   \savefield{postnote}{\cbx@lastpagenumber}%
%%   \savefield{entrykey}{\cbx@lastentrykey}%
%%}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}
%% \begin{macro}{cite:name}
%% Vom Ende zum Anfang: Als erstes wird der Name des Autors, bzw. wenn nicht vorhanden des Herausgebers, ausgegeben (die dann aber im gleichen Format: "cite:author"). Ab jetzt bezieht sich übrigens alles auf die Kurzzitate, die Erstzitate entsprechen einfach dem Bibliographieeintrag!
%%    \begin{macrocode}
%%\newbibmacro*{cite:name}{%
%%  \ifnameundef{author}{%
%%    \ifnameundef{editor}{}{%
%%      \printnames[cite:author]{editor}}%
%%   }{%
%%      \printnames[cite:author]{author}%
%%}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{cite:title}
%%% Als nächstes der Titel. Hier soll möglichst "shorttitle" ausgegeben werden. Wenn das nicht geht, dann wird das Feld "title" ausgelesen.
%%    \begin{macrocode}
%%\newbibmacro*{cite:title}{%
%%  \iffieldundef{shorttitle}{%
%%    \usebibmacro{title}%
%%   }{\printfield{shorttitle}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{fnverweis}
%% Beim Kurzzitat wird -- bei Option "fnverweise" -- am Ende \enquote{(Wie Anm.: \meta{Fußnote des Erstverweises})} ausgegeben.
%%    \begin{macrocode}
%%\newbibmacro*{fnverweis}{%
%%  \ifbool{cbx:fnverweise}{%
%%    \setunit{\addspace}%
%%    \printtext[parens]{wie Anm\adddot\addspace%
%%                \ref{footref:\thefield{entrykey}}}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{cite:year}
%% Als nächstes wird die Ausgabe des Jahres in Kurzzitaten geregelt. Hier werden abhängig von der Option "jahrkeineklammern" keine Klammern gesetzt.
%%    \begin{macrocode}
%%\newbibmacro*{cite:year}{%
%%  \ifbool{cbx:jahrkeineklammern}%
%%     {\printfield{year}}%
%%     {\printfield[parens]{year}}}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{cite:short}
%% Fassen wir das nun alles zusammen, so erhalten wir das Kurzzitat.
%%    \begin{macrocode}
%%\newbibmacro*{cite:short}{%
%%    \end{macrocode}
%% Erst Möglichkeit: Alles schon gesehen ("\ifciteibid" ist "true"), dann wird nur \enquote{ebd.} ausgegeben. Einzige Ausnahme: Wir sind das erste Zitat auf der Seite und die Option "neueseitevollzitat" wurde gesetzt.
%%    \begin{macrocode}
%%  \ifboolexpr{test \ifciteibid and%
%%          not (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%       {\bibstring{ibidem}\isdot}%
%%    \end{macrocode}
%% Zweite Möglichkeit: Immerhin Autor/Hrsg. gleich. Dann wird der nicht nochmal ausgegeben, stattdessen "\bibnamedash" -- gleiche Ausnahme wie oben. Danach in jedem Fall ein Doppelpunkt.
%%
%% Bei der Option "nurshorthand" wird statt all dem aber nur das "shorthand"-Feld ausgegeben.
%%    \begin{macrocode}
%%      {\ifbool{cbx:nurshorthand}%
%%         {\printfield{shorthand}}%
%%         {\ifboolexpr{test \ifciteidem and not%
%%               (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%             {\bibnamedash}%
%%             {\usebibmacro{cite:name}}%
%%        \setunit{\addcolon\addspace}%
%%    \end{macrocode}
%% Als nächstes der Titel gefolgt -- bei Option "mitjahr" -- von dem Jahr (hier geht implizit noch die Option "jahrohneklammern" ein).
%%    \begin{macrocode}        
%%         \usebibmacro{cite:title}%
%%         \ifbool{cbx:mitjahr}{\setunit{\addspace}%
%%                             \usebibmacro{cite:year}}{}}%
%%    \end{macrocode}
%% Bei Bedarf wird -- auch bei Option "nurshorthand" -- noch ein Verweis auf Fußnote des Erstzitats ausgegeben. Jetzt kommt nur noch "postnote".
%% \changes{v1.1}{2012/03/31}{Umsetzung von Option "nurshorthand".}
%%    \begin{macrocode}
%%         \usebibmacro{fnverweis}}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{cite}
%% Die Hauptarbeit geschieht hier: Dieser Makro wird bei jedem Zitieren aufgerufen und muss entscheiden, was zu tun ist.
%%    \begin{macrocode}
%%\newbibmacro*{cite}{%
%%    \end{macrocode}
%% Zuerst werden zwei Spezialfälle verarztet: Bei Fragmenten oder "antik"-Werken wird in jedem Fall \emph{nur} das "shorthand"-Feld ausgegeben, bei Werken, die "frg" aber nicht "frgantik" sind, wird im Anschluss noch \enquote{frg.} ausgegeben.
%%
%% Lustigerweise implizierte "antikfrg" ja "frg", wodurch die Fallunterscheidung etwas esoterisch wird:
%%    \begin{macrocode}
%%  \ifboolexpr{bool {cbx:antik} or bool {cbx:frg}}{%
%%      \ifboolexpr{bool{cbx:antik} or bool {cbx:frgantik}}{%
%%    \end{macrocode}
%% "\bibhyperref" liefert den Verweis (zum clicken) auf das Literaturverzeichnis. Bei der Option "antikebd" wird auch hier ggf. das "shorthand"-Feld durch \enquote{ebd.} ersetzt -- natürlich unter Beachtung der Option "neueseitevollzitat".
%% \changes{v1.1}{2012/03/31}{Umsetzung der Option "antikebd".}
%%    \begin{macrocode}      
%%         \bibhyperref{%
%%             \ifboolexpr{bool {cbx:antikebd} and 
%%                    test \ifciteibid and not%
%%                   (bool {cbx:neueseitevollzitat} and test {\iffirstonpage})}%
%%                {\bibstring{ibidem}}%
%%                {\printfield{shorthand}\setunit{\adddot\addspace}}%
%%          }%
%%        }{%
%%    \end{macrocode}
%% Jetzt sind wir also im Fall "frg" aber nicht "frgantik".
%%    \begin{macrocode}
%%              \bibhyperref{%
%%                 \printfield{shorthand}\setunit{\adddot\addspace}%
%%                 \printtext{frg}\adddot\setunit{\addspace}%
%%              }%
%%        }%  
%%  }{%
%%    \end{macrocode}
%% Nun zum \enquote{Normalfall}. Zuerst müssen wir feststellen, ob es ein Erstzitat oder ein Folgezitat ist. Folgezitate ("\ifciteseen" ist "true") werden mit "cite:short" verarbeitet. Eine Ausnahme: Bei Urkunden wird in dem Fall nur der Titel ausgegeben (außer bei zwei aufeinander folgenden, dann \enquote{ebd.})
%%
%% Außerdem soll man hier beim Anklicken auf dem Erstzitat landen. Das wird weiter unten mit "ref:\thefield{entrykey}" versehen.
%%    \begin{macrocode}
%%  \ifciteseen{\bibhyperlink{ref:\thefield{entrykey}}{%
%%        \ifbool{cbx:urkunde}{%
%%             \ifciteibid{\bibstring{ibidem}}%
%%                           {\usebibmacro{cite:title}}%
%%        }{\usebibmacro{cite:short}}}}%
%%    \end{macrocode}
%% Beim Erstzitat wollen wir ein Vollzitat, also verwenden wir einfach den entsprechenden "BibliographyDriver" aus der "bbx"-Datei. Außerdem müssen wir hier ein "bibhypertarget" für die Folgezitate setzen und wollen gleichzeitig einen Verweis auf das Literaturverzeichnis.
%%    \begin{macrocode}
%%  {\bibhypertarget{ref:\thefield{entrykey}}{%
%%        \bibhyperref{\usedriver{}{\thefield{entrytype}}}%
%%    \end{macrocode}
%% Beim Erstzitat merken wir uns außerdem die Fußnotenzahl.
%%    \begin{macrocode}
%%         \iffootnote{\label{footref:\thefield{entrykey}}}{}%
%%   }}%
%%  }%
%%    \end{macrocode}
%% In jedem Fall wollen wir uns für die "postnote" den Zustand von "\ifciteseen" merken, da wir da nicht mehr rankommen werden. Auch hier rufen wir sicherheitshalber noch einmal "savestuff" auf.
%%    \begin{macrocode}
%%  \ifciteseen{\global\booltrue{cbx:seen}}%
%%                  {\global\boolfalse{cbx:seen}}%
%%  \usebibmacro{savestuff}%
%%}%
%%    \end{macrocode}
%% \end{macro}
%% \begin{macro}{\cite}\begin{macro}{\parencite} \begin{macro}{\footcite} \begin{macro}{\textcite}
%% Zum Abschluss noch die Zitierbefehle. Alle rufen die Makros "prenote", "cite" und "postnote", so wie die unveränderten "biblatex"-Makros "citeindex"  auf. Bei "\textcite" wird am Ende noch "\finentry" aufgerufen, um Leerzeichen am Ende zu entfernen, die den danach kommenden Text ärgern würden. Trennzeichen ist auch hier immer "\multicitedelim".
%%
%% Bemerkenswert ist vielleicht noch, dass "\cite" hier "\footcite" entspricht. Wenn man in einer Fußnote zitieren möchte, kann man das mit "\textcite" gerne tun. "\parencite" ist hier wohl nicht so sinnvoll, aber wennschon dennschon.
%%    \begin{macrocode}
%%\DeclareCiteCommand{\cite}[\mkbibfootnote]%
%%  {\usebibmacro{prenote}}%
%%  {\usebibmacro{citeindex}\usebibmacro{cite}}%
%%  {\multicitedelim}%
%%  {\usebibmacro{postnote}}%
%%\DeclareCiteCommand{\parencite}[\mkbibparens]%
%%  {\usebibmacro{prenote}}%
%%  {\usebibmacro{citeindex}\usebibmacro{cite}}%
%%  {\multicitedelim}%
%%  {\usebibmacro{postnote}}%
%%\DeclareCiteCommand{\footcite}[\mkbibfootnote]%
%%  {\usebibmacro{prenote}}%
%%  {\usebibmacro{citeindex}\usebibmacro{cite}}%
%%  {\multicitedelim}%
%%  {\usebibmacro{postnote}}%
%%\DeclareCiteCommand{\textcite}%
%%  {\usebibmacro{prenote}}%
%%  {\usebibmacro{citeindex}\usebibmacro{cite}}%
%%  {\multicitedelim}%
%%  {\usebibmacro{postnote}\finentry}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}\end{macro}
%% \begin{macro}{\cites} \begin{macro}{\parencites} \begin{macro}{\footcites} \begin{macro}{\textcites}
%% Zu guter letzt die Zitierbefehle für mehrere Zitate auf einmal. Diese basieren auf den entsprechenden \enquote{einfachen} Stilen.
%%    \begin{macrocode}
%%\DeclareMultiCiteCommand{\cites}[\mkbibfootnote]{\cite}%
%%            {\multicitedelim}%
%%\DeclareMultiCiteCommand{\parencites}[\mkparencite]{\parencite}%
%%            {\multicitedelim}%
%%\DeclareMultiCiteCommand{\footcites}[\mkbibfootnote]{\footcite}%
%%           {\multicitedelim}%
%%\DeclareMultiCiteCommand{\textcites}{\textcite}{\multicitedelim}%
%%    \end{macrocode}
%% \end{macro}\end{macro}\end{macro}\end{macro}
%% Jupdidu, das war's! :)
%% \iffalse
%%</cbx>
%% \fi
 \changes{v0.1}{2015/06/04}{Started Project}
 \changes{v1.0}{2015/07/07}{First public version}
\PrintChanges
\PrintIndex

%%\printbibliography
\end{document}
